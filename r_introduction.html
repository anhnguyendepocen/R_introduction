<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">

<head>

<meta charset="utf-8">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="pandoc" />



<meta name="progressive" content="false" />
<meta name="allow-skip" content="false" />

<title>R introduction</title>


<!-- highlightjs -->
<style type="text/css">code{white-space: pre;}</style>
<style type="text/css">
  pre:not([class]) {
    background-color: white;
  }
</style>
<script type="text/javascript">
if (window.hljs) {
  hljs.configure({languages: []});
  hljs.initHighlightingOnLoad();
  if (document.readyState && document.readyState === "complete") {
    window.setTimeout(function() { hljs.initHighlighting(); }, 0);
  }
}
</script>

<!-- taken from https://github.com/rstudio/rmarkdown/blob/67b7f5fc779e4cfdfd0f021d3d7745b6b6e17149/inst/rmd/h/default.html#L296-L362 -->
<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  background: white;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "&#xe258;";
  border: none;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<script>
$(document).ready(function () {
  window.buildTabsets("section-TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open')
  });
});
</script>
<!-- end tabsets -->


<link rel="stylesheet" href="css/mystyle.css" type="text/css" />

</head>

<body>



<div class="pageContent band">
<div class="bandContent page">

<div class="topics">

<div id="section-create-a-chart" class="section level2">
<h2>1 Create a chart</h2>
<p><em>In this section we load data into R and create a chart using this data.</em></p>
<p>Let’s say that we would like to create a line chart of the income shares in the United Kingdom. In Microsoft Excel we would do this using the following steps:</p>
<ol style="list-style-type: decimal">
<li>Open the data in Microsoft Excel</li>
<li>Select “Insert”</li>
<li>Select “Line chart”</li>
<li>Select “Select Data”</li>
<li>Select the data for the horizontal axis</li>
<li>Select the data for the vertical axis</li>
</ol>
<p>In R we can load data and create a line chart by asking R to run two lines of “code”. A code is basically just written instructions that replace our “mouse clicking” in Microsoft Excel. So instead of using the mouse to click on “File” and then “Open” and then “Browse” and so on, we use the “R language” to tell R to do this. The box below contains your first R code. In programming-based software we first write some code and then tell the software to “execute” or “run” this code. You can run the code below by clicking “Run Code”. Try it!</p>
<div class="tutorial-exercise" data-label="first-chart1" data-caption="Code" data-completion="1" data-diagnostics="1" data-startover="1" data-lines="0">
<pre class="text"><code>wid_data&lt;-wid_data_uk_t1
ggplot(data=wid_data,aes(x=Year,y=Income_share))+geom_line()</code></pre>
<script type="application/json" data-opts-chunk="1">{"fig.width":6.5,"fig.height":4,"fig.retina":2,"fig.align":"default","fig.keep":"high","fig.show":"asis","out.width":624,"warning":false,"error":false,"message":false,"exercise.df_print":"paged","exercise.checker":"NULL"}</script>
</div>
<p>You should now see your first R chart. Congratulations!</p>
<p>How did you create this chart? What is going on in these two lines? Let’s look at the first line, starting from the back:</p>
<ul>
<li>the code <code>read_csv()</code> is the R equivalent of using the mouse to click on “File” and then “Open” (which is what we would do in Excel).</li>
<li>inserting the address <code>"https://www.hhsievertsen.net/economicdata/src/wid_uk_t1.csv"</code> in the parentheses <code>( )</code> is the R equivalent of selecting “Browse”. We don’t browse with R but instead provide a precise address of where our document is (we will return to this later).</li>
<li><code>&lt;-</code> is the assignment operator. By writing <code>&lt;-read_csv()</code> we tell R to assign the data it loads with <code>read_csv()</code> to the name we enter to the left of the arrow.</li>
<li><code>wid_data</code> is just a name for the dataset. We could have used more or less any name here. But I decided to go for wid_data because we load data from the World Inequality Database (wid).</li>
<li>To sum up, we loaded a dataset from a specified location and assigned it to the name wid_data.</li>
</ul>
<p>So let’s try just to run just this first line ( again click “Run Code”):</p>
<div class="tutorial-exercise" data-label="first-chart2" data-caption="Code" data-completion="1" data-diagnostics="1" data-startover="1" data-lines="0">
<pre class="text"><code>wid_data&lt;-read_csv(&quot;https://www.hhsievertsen.net/economicdata/src/wid_uk_t1.csv&quot;)</code></pre>
<script type="application/json" data-opts-chunk="1">{"fig.width":6.5,"fig.height":4,"fig.retina":2,"fig.align":"default","fig.keep":"high","fig.show":"asis","out.width":624,"warning":false,"error":false,"message":false,"exercise.df_print":"paged","exercise.checker":"NULL"}</script>
</div>
<p>What happens Nothing. That’s because we simply asked R to load the data. We didn’t tell R to do anything with the data. The action happens in the second line of the first code. Let us now look at that line.</p>
<ul>
<li>We start the second line with <code>ggplot( )</code> which initiates a “chart object” in R.</li>
<li>In the parentheses of the <code>ggplot()</code> command, we first write <code>data=wid_data</code>. This tells R to create a chart object with the data loaded in the first line as the dataset.</li>
<li>We also add <code>aes(x=Year,y=Income_share)</code> to the <code>ggplot( )</code> command. This tells R to use the variable <tt>Year</tt> on the x-axis and <tt>Income_share</tt> on the y-axis.</li>
</ul>
<p>Let’s try just to run the first line and the code we just discussed:</p>
<div class="tutorial-exercise" data-label="first-chart3" data-caption="Code" data-completion="1" data-diagnostics="1" data-startover="1" data-lines="0">
<pre class="text"><code>wid_data&lt;-wid_data_uk_t1
ggplot(data=wid_data,aes(x=Year,y=Income_share))</code></pre>
<script type="application/json" data-opts-chunk="1">{"fig.width":6.5,"fig.height":4,"fig.retina":2,"fig.align":"default","fig.keep":"high","fig.show":"asis","out.width":624,"warning":false,"error":false,"message":false,"exercise.df_print":"paged","exercise.checker":"NULL"}</script>
</div>
What happens? More than in the last code block. We got a chart area. But we still don’t see any data plotted. That is because we still need to tell R what to do with the data. So far we’ve only told R to load a dataset and create a chart objet based on that dataset. We haven’t told R anything about what type of chart to create. By writing <code>+geom_line()</code> we tell R to add a line chart to the chart object. This completes the code. Let’s try to run the complete code again:
<div class="tutorial-exercise-support" data-label="datoprep" data-caption="Code" data-completion="1" data-diagnostics="1" data-startover="1" data-lines="0">
<pre class="text"><code>rm(wid_data)
rm(wid_dato)</code></pre>
</div>
<div class="tutorial-exercise" data-label="firstchart4" data-caption="Code" data-completion="1" data-diagnostics="1" data-startover="1" data-lines="0">
<pre class="text"><code>wid_data&lt;-read_csv(&quot;https://www.hhsievertsen.net/economicdata/src/wid_uk_t1.csv&quot;)
ggplot(data=wid_dato,aes(x=Year,y=Income_share))+geom_line()</code></pre>
<script type="application/json" data-opts-chunk="1">{"fig.width":6.5,"fig.height":4,"fig.retina":2,"fig.align":"default","fig.keep":"high","fig.show":"asis","out.width":624,"warning":false,"error":false,"message":false,"exercise.df_print":"paged","exercise.setup":"datoprep","exercise.checker":"NULL"}</script>
</div>
<div class="tutorial-exercise-support" data-label="firstchart4-hint-1" data-caption="Code" data-completion="1" data-diagnostics="1" data-startover="1" data-lines="0">
<pre class="text"><code># The wid_dato object doesn&#39;t exist, because the object is called wid_data. </code></pre>
</div>
<div class="tutorial-exercise-support" data-label="firstchart4-hint-2" data-caption="Code" data-completion="1" data-diagnostics="1" data-startover="1" data-lines="0">
<pre class="text"><code># Change the o to an a in the &quot;wid_data&quot; in the second line and run the code again.</code></pre>
</div>
<p>Oh. We didn’t get a chart this time. Instad we received an error message. The instructions to R did not work, because we made a mistake. Luckily R gives us some hints at what went wrong. The error message says: <code>object 'wid_dato' not found</code>. This means that R is trying to do something with the object called <tt>wid_dato</tt>, but that object doesn’t exist! We should therefore check whether the element is created. We created that object in the first line. Let’s look closely at first line! The name of the object we create is <tt>wid_data</tt>. That is fine, but it is different to the name we use in the second row, where we call it <tt>wid_dato</tt>. Please change the “o” to an “a” in <tt>wid_dato</tt> and click “run code”" again. Does it work now?</p>
<p>We can add comments to the R code. A comment is content that R ignores when it checks the instructions. We add comments by starting the line with the hash tag symbol #. In the following code I added two lines of comments to explain what we are doing.</p>
<div class="tutorial-exercise" data-label="first-chart4f" data-caption="Code" data-completion="1" data-diagnostics="1" data-startover="1" data-lines="0">
<pre class="text"><code># 1. Load the data and store it in the object called wid_data
wid_data&lt;-read_csv(&quot;https://www.hhsievertsen.net/economicdata/src/wid_uk_t1.csv&quot;)
# 2. Create a chart object using wid_data and add a line chart
ggplot(data=wid_data,aes(x=Year,y=Income_share))+geom_line()</code></pre>
<script type="application/json" data-opts-chunk="1">{"fig.width":6.5,"fig.height":4,"fig.retina":2,"fig.align":"default","fig.keep":"high","fig.show":"asis","out.width":624,"warning":false,"error":false,"message":false,"exercise.df_print":"paged","exercise.checker":"NULL"}</script>
</div>
<p>In the few lines above we use several R function. We can recognize a function by the parenthesis <code>()</code>. So <code>ggplot()</code> is a function, <code>read_csv()</code> is a function and so on. A R function performs a task given the instructions we provide in the parentheses.</p>
<p><em>That was the first R lecture. In this lecture we’ve covered the following topics</em></p>
<ul>
<li>loading data into R using the <code>read_csv()</code> function.</li>
<li>assigning a name to the loaded object using the <code>&lt;-</code> assignment operator.</li>
<li>creating a chart object using the <code>ggplot()</code> function.</li>
<li>defining what to show on the x and y axes using the <code>aes()</code> function.</li>
<li>adding a line chart to the chart object using <code>+geom_line()</code></li>
<li>error messages</li>
<li>comments</li>
</ul>
<p>Before we move on to the next lecture, let’s try a short quiz about the covered topics:*</p>
<p><div class="panel-heading tutorial-quiz-title">Quiz</div><div class="panel panel-default">
<div data-label="quiz-1" class="tutorial-question panel-body">
<div id="quiz-1-answer_container" class="shiny-html-output"></div>
<div id="quiz-1-message_container" class="shiny-html-output"></div>
<div id="quiz-1-action_button_container" class="shiny-html-output"></div>
<script>if (Tutorial.triggerMathJax) Tutorial.triggerMathJax()</script>
</div>
</div><div class="panel panel-default">
<div data-label="quiz-2" class="tutorial-question panel-body">
<div id="quiz-2-answer_container" class="shiny-html-output"></div>
<div id="quiz-2-message_container" class="shiny-html-output"></div>
<div id="quiz-2-action_button_container" class="shiny-html-output"></div>
<script>if (Tutorial.triggerMathJax) Tutorial.triggerMathJax()</script>
</div>
</div></p>
<p><em>Did you answer both questions correctly? If no, don’t worry. Practice makes perfect. We will use these functions many times in this tutorial. In the next lecture we will have a look at what is in the dataset.</em></p>
</div>
<div id="section-polish-the-chart" class="section level2">
<h2>2 Polish the chart</h2>
<p><em>In this section we’ll polish the chart we created in the first lecture.</em></p>
<div id="section-what-is-wrong-with-the-default-chart" class="section level3">
<h3>What is wrong with the default chart?</h3>
<p>Let’s have another look at the chart we create in lecture 1:</p>
<p><img src="r_introduction_files/figure-html/unnamed-chunk-1-1.png" width="624" /></p>
<p>What needs to be changed?</p>
<ul>
<li>The data-ink ratio is not optimal
<ul>
<li>The grey background area does not show any data or make the values easier to read.</li>
<li>The tick marks and grid lines could (potentially) be left out.</li>
<li>The labels and the line could be emphasized.</li>
</ul></li>
<li>The chart is not self-explanatory. From just looking at the chart
<ul>
<li>We do not know the country or region the data covers.</li>
<li>We do not not know the data source used.</li>
<li>We do not know what the chart shows (which group’s income share are we plotting?).</li>
</ul></li>
</ul>
<p>Let’s look at some of these issues.</p>
<div id="section-using-the-documentation-remove-non-data-ink-and-emphasize-data-ink." class="section level4 unnumbered">
<h4 class="unnumbered">Using the documentation: Remove non-data ink and emphasize data ink.</h4>
<p>Many of the non-data chart elements in ggplot charts are specified by the function <code>+theme()</code>. But how do we know how we can change the background, or the grid lines or the tick marks? We could try by writing something like <code>+theme(background=blank)</code>. This might work, but we would only be guessing. An alternative to guessing is to use the help function in R. If we type “?” followed by the function name in R, R will search for any help files on this function. So let’s try it. Type <code>?theme</code> in the code block below:</p>
<div class="tutorial-exercise" data-label="polish1" data-caption="Code" data-completion="1" data-diagnostics="1" data-startover="1" data-lines="0">
<script type="application/json" data-opts-chunk="1">{"fig.width":6.5,"fig.height":4,"fig.retina":2,"fig.align":"default","fig.keep":"high","fig.show":"asis","out.width":624,"warning":false,"error":false,"message":false,"exercise.df_print":"paged","exercise.checker":"NULL"}</script>
</div>
<div class="tutorial-exercise-support" data-label="polish1-hint-1" data-caption="Code" data-completion="1" data-diagnostics="1" data-startover="1" data-lines="0">
<pre class="text"><code>?theme</code></pre>
</div>
<p>You should now see the help file. The help file can be a bit overwhelming. It includes lots of details about the function. I do not recommend that you read the entire help file for functions like theme(), because you probably will not be able to remember it anyway. Instead you should just learn how to navigate to the element in the help file you are interested in.</p>
<p>It takes some practice to read a R help file. Don’t worry if it seems confusing now. You will get there. The R help file always has the same structure. The help file starts with a general description of what the function does, followed by a description of the “syntax”. The syntax tells you how you should use the function. The help file typically ends with a few examples. These examples can be very useful.</p>
<p>In the helpfile for <code>theme()</code> try to figure out what you have to write to change the background of the chart area (search for something like: <tt> background of plotting area</tt>).</p>
<p><div class="panel-heading tutorial-quiz-title">Quiz</div><div class="panel panel-default">
<div data-label="quizpolish1-1" class="tutorial-question panel-body">
<div id="quizpolish1-1-answer_container" class="shiny-html-output"></div>
<div id="quizpolish1-1-message_container" class="shiny-html-output"></div>
<div id="quizpolish1-1-action_button_container" class="shiny-html-output"></div>
<script>if (Tutorial.triggerMathJax) Tutorial.triggerMathJax()</script>
</div>
</div></p>
<p>In the documentation you will see that you can adjust both “plot.background” and “panel.background”. The former is the background of the entire figure. The latter is the background of just the plot area. And yes, the names are confusing given that I called it plotting area. When working in programming-based software we have to be very precise on what we want to do.</p>
<p>Once we’ve found the argument for the background of the plotting area, we need to figure out what we should do with that argument. If we want an argument to be blank, we set it to <code>element_blank()</code>. We simply tell R to let “panel.background()” be “equal” to “element_blank()” using the equality sign:</p>
<ul>
<li><code>panel.background = element_blank()</code></li>
</ul>
<p>Let’s now remove the background of the plotting area. Combine <code>+theme()</code> with the correct answer to the quiz question above and <code>element_blank()</code> in the code block below (this is difficult, so click on hints if you need some help):</p>
<div class="tutorial-exercise" data-label="polish2" data-caption="Code" data-completion="1" data-diagnostics="1" data-startover="1" data-lines="0">
<pre class="text"><code># 1. Load the data and store it in the object called wid_data
wid_data&lt;-read_csv(&quot;https://www.hhsievertsen.net/economicdata/src/wid_uk_t1.csv&quot;)
# 2. Create a chart object using wid_data and add a line chart
ggplot(data=wid_data,aes(x=Year,y=Income_share))+geom_line()</code></pre>
<script type="application/json" data-opts-chunk="1">{"fig.width":6.5,"fig.height":4,"fig.retina":2,"fig.align":"default","fig.keep":"high","fig.show":"asis","out.width":624,"warning":false,"error":false,"message":false,"exercise.df_print":"paged","exercise.checker":"NULL"}</script>
</div>
<div class="tutorial-exercise-support" data-label="polish2-hint-1" data-caption="Code" data-completion="1" data-diagnostics="1" data-startover="1" data-lines="0">
<pre class="text"><code># 1. Load the data and store it in the object called wid_data
wid_data&lt;-read_csv(&quot;https://www.hhsievertsen.net/economicdata/src/wid_uk_t1.csv&quot;)
# 2. Create a chart object using wid_data and add a line chart
ggplot(data=wid_data,aes(x=Year,y=Income_share))+geom_line()+
       theme(...)</code></pre>
</div>
<div class="tutorial-exercise-support" data-label="polish2-hint-2" data-caption="Code" data-completion="1" data-diagnostics="1" data-startover="1" data-lines="0">
<pre class="text"><code># 1. Load the data and store it in the object called wid_data
wid_data&lt;-read_csv(&quot;https://www.hhsievertsen.net/economicdata/src/wid_uk_t1.csv&quot;)
# 2. Create a chart object using wid_data and add a line chart
ggplot(data=wid_data,aes(x=Year,y=Income_share))+geom_line()+
       theme(panel.background = ...)</code></pre>
</div>
<div class="tutorial-exercise-support" data-label="polish2-hint-3" data-caption="Code" data-completion="1" data-diagnostics="1" data-startover="1" data-lines="0">
<pre class="text"><code># 1. Load the data and store it in the object called wid_data
wid_data&lt;-read_csv(&quot;https://www.hhsievertsen.net/economicdata/src/wid_uk_t1.csv&quot;)
# 2. Create a chart object using wid_data and add a line chart
ggplot(data=wid_data,aes(x=Year,y=Income_share))+geom_line()+
       theme(panel.background = element_blank())</code></pre>
</div>
<p>Did you manage to remove the grey background (the fully working code is in the last hint)? Don’t worry if this seems complicated. You’ll see it again. Actually, the syntax for changing the tick marks is very similar. To set all the tick marks to blank, we add <code>axis.ticks=element_blank()</code>. Try to add that to the code you wrote above above and see whether it works (you should include it within the <code>theme()</code> function, after you changed the background).</p>
<div class="tutorial-exercise" data-label="xc" data-caption="Code" data-completion="1" data-diagnostics="1" data-startover="1" data-lines="0">
<pre class="text"><code># 1. Load the data and store it in the object called wid_data
wid_data&lt;-read_csv(&quot;https://www.hhsievertsen.net/economicdata/src/wid_uk_t1.csv&quot;)
# 2. Create a line chart, remove background and ticks
ggplot(data=wid_data,aes(x=Year,y=Income_share))+geom_line()</code></pre>
<script type="application/json" data-opts-chunk="1">{"fig.width":6.5,"fig.height":4,"fig.retina":2,"fig.align":"default","fig.keep":"high","fig.show":"asis","out.width":624,"warning":false,"error":false,"message":false,"exercise.df_print":"paged","exercise.checker":"NULL"}</script>
</div>
<div class="tutorial-exercise-support" data-label="xc-hint-1" data-caption="Code" data-completion="1" data-diagnostics="1" data-startover="1" data-lines="0">
<pre class="text"><code># 1. Load the data and store it in the object called wid_data
wid_data&lt;-read_csv(&quot;https://www.hhsievertsen.net/economicdata/src/wid_uk_t1.csv&quot;)
# 2. Create a line chart, remove background and ticks
ggplot(data=wid_data,aes(x=Year,y=Income_share))+geom_line()+
       theme(panel.background = element_blank(), axis.ticks = element_blank())</code></pre>
</div>
<p>The chart already looks fairly good. We’ve removed some of the non-data ink. As you see from the help file for <code>theme()</code> we can adjust many aspects of the chart. But let’s move on to the next step and emphasize some of the important elements (you are of course welcome to adjust other aspects).</p>
</div>
</div>
<div id="section-emphasizing-data-ink" class="section level3">
<h3>Emphasizing data-ink</h3>
<p>The most important data ink is the line chart. To figure out how to adjust the line we can use the help file for <code>geom_line()</code>. I’ll just provide some suggestions for changing the aesthetics here:</p>
<ul>
<li><code>size=1.2</code>: sets the line thickness to 1.2</li>
<li><code>color="red"</code>: sets the line colour to be red.</li>
<li><code>linetype="dashed"</code>: Sets the line type to be dashed (could also be dotted).</li>
</ul>
<p>We insert these arguments (separated with a “,”) inside the parentheses of the <code>geom_line()</code> function. Try it in the following code block. You are also encouraged to try different values for the line thickness, colour and type.</p>
<div class="tutorial-exercise" data-label="apolish4" data-caption="Code" data-completion="1" data-diagnostics="1" data-startover="1" data-lines="0">
<pre class="text"><code># 1. Load the data and store it in the object called wid_data
wid_data&lt;-read_csv(&quot;https://www.hhsievertsen.net/economicdata/src/wid_uk_t1.csv&quot;)
# 2. Create a line chart, remove background and ticks
ggplot(data=wid_data,aes(x=Year,y=Income_share))+geom_line()</code></pre>
<script type="application/json" data-opts-chunk="1">{"fig.width":6.5,"fig.height":4,"fig.retina":2,"fig.align":"default","fig.keep":"high","fig.show":"asis","out.width":624,"warning":false,"error":false,"message":false,"exercise.df_print":"paged","exercise.checker":"NULL"}</script>
</div>
<div class="tutorial-exercise-support" data-label="apolish4-hint-1" data-caption="Code" data-completion="1" data-diagnostics="1" data-startover="1" data-lines="0">
<pre class="text"><code># 1. Load the data and store it in the object called wid_data
wid_data&lt;-read_csv(&quot;https://www.hhsievertsen.net/economicdata/src/wid_uk_t1.csv&quot;)
# 2. Create a line chart, change the line aesthetics
ggplot(data=wid_data,aes(x=Year,y=Income_share))+geom_line(color=&quot;red&quot;)+
       theme(panel.background = element_blank(), axis.ticks = element_blank())</code></pre>
</div>
<div class="tutorial-exercise-support" data-label="apolish4-hint-2" data-caption="Code" data-completion="1" data-diagnostics="1" data-startover="1" data-lines="0">
<pre class="text"><code># 1. Load the data and store it in the object called wid_data
wid_data&lt;-read_csv(&quot;https://www.hhsievertsen.net/economicdata/src/wid_uk_t1.csv&quot;)
# 2. Create a line chart, change the line aesthetics
ggplot(data=wid_data,aes(x=Year,y=Income_share))+geom_line(color=&quot;red&quot;, size=1.2)+
       theme(panel.background = element_blank(), axis.ticks = element_blank())</code></pre>
</div>
<div class="tutorial-exercise-support" data-label="apolish4-hint-3" data-caption="Code" data-completion="1" data-diagnostics="1" data-startover="1" data-lines="0">
<pre class="text"><code># 1. Load the data and store it in the object called wid_data
wid_data&lt;-read_csv(&quot;https://www.hhsievertsen.net/economicdata/src/wid_uk_t1.csv&quot;)
# 2. Create a line chart, change the line aesthetics
ggplot(data=wid_data,aes(x=Year,y=Income_share))+geom_line(color=&quot;red&quot;,size=1.2,linetype=&quot;dashed&quot;)+
       theme(panel.background = element_blank(), axis.ticks = element_blank())</code></pre>
</div>
<p>We’ve now seen how we can change the color, the line type and the thickness of the line. I don’t think a thick dashed red line is ideal in a chart with no other lines. But now you know how to change these elements.</p>
</div>
<div id="section-changing-labels-and-titles" class="section level3">
<h3>Changing labels and titles</h3>
<p>Our line chart is almost completed. However it still not self-explanatory. We should add a title and clearly state the source. We add the these elements with the <code>labs()</code> function. Again, we use the help documention to figure out how we use this function (we type <code>?labs()</code>), but you don’t need to read it now. Here are some suggestions:</p>
<ul>
<li><code>title="The income share of the top 1pct in the UK"</code></li>
<li><code>y="Income share"</code></li>
<li><code>x="Year"</code></li>
<li><code>caption="Data source: The World Inequality Database"</code></li>
</ul>
<p>I’ve inserted these labels in the code block below along with some of the changes we made earlier. Make sure that you understand all elements in the code. If you don’t understand an element, then try to change it and see what happens or have a look in the R help file.</p>
<div class="tutorial-exercise" data-label="polish5" data-caption="Code" data-completion="1" data-diagnostics="1" data-startover="1" data-lines="0">
<pre class="text"><code># 1. Load the data and store it in the object called wid_data
wid_data&lt;-read_csv(&quot;https://www.hhsievertsen.net/economicdata/src/wid_uk_t1.csv&quot;)
# 2. Create a line chart, change the line aesthetics
ggplot(data=wid_data,aes(x=Year,y=Income_share))+
        geom_line(size=1.2)+
        theme(panel.background = element_blank(), axis.ticks = element_blank())+
        labs(title=&quot;The income share of the top 1pct in the UK.&quot;,
        x=&quot;Year&quot;, y=&quot;Income share&quot;, caption=&quot;Data source: The World Inequality Database&quot;)</code></pre>
<img src="r_introduction_files/figure-html/polish5-1.png" width="624" />
<script type="application/json" data-opts-chunk="1">{"fig.width":6.5,"fig.height":4,"fig.retina":2,"fig.align":"default","fig.keep":"high","fig.show":"asis","out.width":624,"warning":false,"error":false,"message":false,"exercise.df_print":"paged","exercise.checker":"NULL"}</script>
</div>
<p>This chart already looks fairly good. I decided to not make it dashed and to keep it black, but feel free to adjust it in a way you like.</p>
</div>
<div id="section-change-the-x-and-y-axis-ranges" class="section level3">
<h3>Change the x and y axis ranges</h3>
<p>Finally, we might also want to change the x and y axis ranges. In this case I think it would be nice if the y axis goes from 0 to 0.15. There are several ways to achieve that:</p>
<ul>
<li>add <code>+ylim(0,0.15)</code> (only defines where the axis range starts and stops).</li>
<li>or add <code>+scale_y_continuous(breaks=c(0.03,0.06,0.09,0.12), limits = c(0, 0.15))</code> (as above but also specifies the intervals for the axis labels).</li>
<li>(and similar commands for the x axis).</li>
</ul>
<p>Let’s add one of the two options to our chart:</p>
<div class="tutorial-exercise" data-label="polish6" data-caption="Code" data-completion="1" data-diagnostics="1" data-startover="1" data-lines="0">
<pre class="text"><code># 1. Load the data and store it in the object called wid_data
wid_data&lt;-read_csv(&quot;https://www.hhsievertsen.net/economicdata/src/wid_uk_t1.csv&quot;)
# 2. Create a line chart with all our settings
ggplot(data=wid_data,aes(x=Year,y=Income_share))+
        geom_line(size=1.2)+
        theme(panel.background = element_blank(), axis.ticks = element_blank())+
        labs(title=&quot;The income share of the top 1pct in the UK.&quot;,
        x=&quot;Year&quot;, y=&quot;Income share&quot;, caption=&quot;Data source: The World Inequality Database&quot;)</code></pre>
<script type="application/json" data-opts-chunk="1">{"fig.width":6.5,"fig.height":4,"fig.retina":2,"fig.align":"default","fig.keep":"high","fig.show":"asis","out.width":624,"warning":false,"error":false,"message":false,"exercise.df_print":"paged","exercise.checker":"NULL"}</script>
</div>
<div class="tutorial-exercise-support" data-label="polish6-hint-1" data-caption="Code" data-completion="1" data-diagnostics="1" data-startover="1" data-lines="0">
<pre class="text"><code># 1. Load the data and store it in the object called wid_data
wid_data&lt;-read_csv(&quot;https://www.hhsievertsen.net/economicdata/src/wid_uk_t1.csv&quot;)
# 2. Create a line chart with all our settings
ggplot(data=wid_data,aes(x=Year,y=Income_share))+
        geom_line(size=1.2)+
        theme(panel.background = element_blank(), axis.ticks = element_blank())+
        labs(title=&quot;The income share of the top 1pct in the UK.&quot;,
        x=&quot;Year&quot;, y=&quot;Income share&quot;, caption=&quot;Data source: The World Inequality Database&quot;)+
        scale_y_continuous(breaks=c(0,0.03,0.06,0.09,0.12,0.15), limits = c(0, 0.15))</code></pre>
</div>
<p>To specify the y-axis limits we use the function <code>c(...)</code>. This function combines values into a vector of values. So <code>c(0,0.03,0.06)</code> simply creates a vector of the numbers 0, 0.03, 0.06.</p>
</div>
<div id="section-polishing-charts---summary" class="section level3">
<h3>Polishing charts - summary</h3>
<p>In this lecture we modified the default R chart by</p>
<ul>
<li>removing the background and tick marks using the <code>theme()</code> function.</li>
<li>making the line thicker using the arguments for <code>geom_line()</code>.</li>
<li>added and changed labels and titles using the <code>labs()</code> function.</li>
<li>changed the axes range usinge the <code>scale_y_continuous()</code> function.</li>
<li>combining several values into a vector using the <code>c(...)</code> function.</li>
<li>We also learned how to use the help function by writing <code>?theme()</code>.</li>
</ul>
<p>Why do we use the “+” when we change the chart and not the assignment operator? That is because we use the assignment operator when we assign something to a name (or an object). When changing the ggplot chart we are basically adding and adjusting “layers”. We could also assign the chart to a name by adding a “<code>my_first_chart&lt;-</code>” at the beginning of line 4. Let’s run the full code</p>
<div class="tutorial-exercise" data-label="polish7" data-caption="Code" data-completion="1" data-diagnostics="1" data-startover="1" data-lines="0">
<pre class="text"><code># 1. Load the data and store it in the object called wid_data
wid_data&lt;-read_csv(&quot;https://www.hhsievertsen.net/economicdata/src/wid_uk_t1.csv&quot;)
# 2. Create a line chart and assign it to the name &quot;my_first_chart&quot;
my_first_chart&lt;-ggplot(data=wid_data,aes(x=Year,y=Income_share))+
        geom_line(size=1.2)+
        theme(panel.background = element_blank(), axis.ticks = element_blank())+
        labs(title=&quot;The income share of the top 1pct in the UK.&quot;,
        x=&quot;Year&quot;, y=&quot;Income share&quot;, caption=&quot;Data source: The World Inequality Database&quot;)+
        scale_y_continuous(breaks=c(0,0.03,0.06,0.09,0.12,0.15), limits = c(0, 0.15))</code></pre>
<script type="application/json" data-opts-chunk="1">{"fig.width":6.5,"fig.height":4,"fig.retina":2,"fig.align":"default","fig.keep":"high","fig.show":"asis","out.width":624,"warning":false,"error":false,"message":false,"exercise.df_print":"paged","exercise.checker":"NULL"}</script>
</div>
<div class="tutorial-exercise" data-label="polish7-hint-1" data-caption="Code" data-completion="1" data-diagnostics="1" data-startover="1" data-lines="0">
<pre class="text"><code># 1. Load the data and store it in the object called wid_data
wid_data&lt;-read_csv(&quot;https://www.hhsievertsen.net/economicdata/src/wid_uk_t1.csv&quot;)
# 2. Create a line chart and assign it to the name &quot;my_first_chart&quot;
my_first_chart&lt;-ggplot(data=wid_data,aes(x=Year,y=Income_share))+
        geom_line(size=1.2)+
        theme(panel.background = element_blank(), axis.ticks = element_blank())+
        labs(title=&quot;The income share of the top 1pct in the UK.&quot;,
        x=&quot;Year&quot;, y=&quot;Income share&quot;, caption=&quot;Data source: The World Inequality Database&quot;)+
        scale_y_continuous(breaks=c(0,0.03,0.06,0.09,0.12,0.15), limits = c(0, 0.15))
# display the chart
my_first_chart</code></pre>
<script type="application/json" data-opts-chunk="1">{"fig.width":6.5,"fig.height":4,"fig.retina":2,"fig.align":"default","fig.keep":"high","fig.show":"asis","out.width":624,"warning":false,"error":false,"message":false,"exercise.df_print":"paged","exercise.checker":"NULL"}</script>
</div>
<p>Uhh. R did not display a chart this time. Why not? that is because instead of displaying the chart we ask R to save the chart under the name <tt>my_first_chart</tt>. We can always display it later by simply writing <code>my_first_chart</code> (try it).</p>
<p>Let’s end this lecture with a small quiz:</p>
<p><div class="panel-heading tutorial-quiz-title">Quiz</div><div class="panel panel-default">
<div data-label="quizpolish2-1" class="tutorial-question panel-body">
<div id="quizpolish2-1-answer_container" class="shiny-html-output"></div>
<div id="quizpolish2-1-message_container" class="shiny-html-output"></div>
<div id="quizpolish2-1-action_button_container" class="shiny-html-output"></div>
<script>if (Tutorial.triggerMathJax) Tutorial.triggerMathJax()</script>
</div>
</div><div class="panel panel-default">
<div data-label="quizpolish2-2" class="tutorial-question panel-body">
<div id="quizpolish2-2-answer_container" class="shiny-html-output"></div>
<div id="quizpolish2-2-message_container" class="shiny-html-output"></div>
<div id="quizpolish2-2-action_button_container" class="shiny-html-output"></div>
<script>if (Tutorial.triggerMathJax) Tutorial.triggerMathJax()</script>
</div>
</div></p>
<p>That what is for this lecture. In the next lecture we’ll look at how we can view the content of a dataset.</p>
</div>
</div>
<div id="section-the-content-of-the-dataset" class="section level2">
<h2>3 The content of the dataset</h2>
<div id="section-lets-see-what-is-in-the-dataset" class="section level3">
<h3>Let’s see what is in the dataset</h3>
<p><em>In this section we take a look at the content of the data we load into R. </em></p>
<p>What if we didn’t know that the dataset we used in the first section contained a variable named “Year” and a variable named “Income_share”? We need some way to assess the content of the object <code>wid_data</code>. We can ask R to show the first six observations using the <code>head()</code> function. Let’s try it:</p>
<div class="tutorial-exercise" data-label="look1" data-caption="Code" data-completion="1" data-diagnostics="1" data-startover="1" data-lines="0">
<pre class="text"><code># 1. Load the data and store it in the object called wid_data
wid_data&lt;-read_csv(&quot;https://www.hhsievertsen.net/economicdata/src/wid_uk_t1.csv&quot;)
# 2. List the first six observations of wid_data
head(wid_data)</code></pre>
<script type="application/json" data-opts-chunk="1">{"fig.width":6.5,"fig.height":4,"fig.retina":2,"fig.align":"default","fig.keep":"high","fig.show":"asis","out.width":624,"warning":false,"error":false,"message":false,"exercise.df_print":"paged","exercise.checker":"NULL"}</script>
</div>
<p>Printing the first six values gives us a lot of information about the content of wid_data:</p>
<ul>
<li>The variables: Year and Income_share</li>
<li>The variable types. <tt><dbl></tt> tells us that the variables are double precision floating point numbers. That is a number type that can contain long numbers. We’ll meet other variable types later on.</li>
<li>The first six values of the variables.</li>
</ul>
<p>To view the <em>last</em> six observations of <tt>wid_data</tt> we would would write <code>tail(wid_Data)</code>. We can also see the contents of datasets such as <tt>wid_data</tt> by simply typing <code>wid_data</code>. Try it in the the code block below, but remember to load the dataset first!</p>
<div class="tutorial-exercise" data-label="look2" data-caption="Code" data-completion="1" data-diagnostics="1" data-startover="1" data-lines="0">
<pre class="text"><code># 1. Load the data and store it in the object called wid_data

# 2. View the full dataset</code></pre>
<script type="application/json" data-opts-chunk="1">{"fig.width":6.5,"fig.height":4,"fig.retina":2,"fig.align":"default","fig.keep":"high","fig.show":"asis","out.width":624,"warning":false,"error":false,"message":false,"exercise.df_print":"paged","exercise.checker":"NULL"}</script>
</div>
<div class="tutorial-exercise-support" data-label="look2-hint-1" data-caption="Code" data-completion="1" data-diagnostics="1" data-startover="1" data-lines="0">
<pre class="text"><code># 1. Load the data and store it in the object called wid_data
wid_data&lt;-read_csv(&quot;https://www.hhsievertsen.net/economicdata/src/wid_uk_t1.csv&quot;)
# 2. View the full dataset</code></pre>
</div>
<div class="tutorial-exercise-support" data-label="look2-hint-2" data-caption="Code" data-completion="1" data-diagnostics="1" data-startover="1" data-lines="0">
<pre class="text"><code># 1. Load the data and store it in the object called wid_data
wid_data&lt;-read_csv(&quot;https://www.hhsievertsen.net/economicdata/src/wid_uk_t1.csv&quot;)
# 2. View the full dataset
wid_data</code></pre>
</div>
<p>Did it work? You should now be able to browse through the dataset and look at specific values. What was the income share of the top 1 percent in United Kingdom in 2014? <div class="panel-heading tutorial-quiz-title">Quiz</div><div class="panel panel-default">
<div data-label="quiz0-1" class="tutorial-question panel-body">
<div id="quiz0-1-answer_container" class="shiny-html-output"></div>
<div id="quiz0-1-message_container" class="shiny-html-output"></div>
<div id="quiz0-1-action_button_container" class="shiny-html-output"></div>
<script>if (Tutorial.triggerMathJax) Tutorial.triggerMathJax()</script>
</div>
</div></p>
</div>
<div id="section-lets-summarize-the-content-of-the-dataset" class="section level3">
<h3>Let’s summarize the content of the dataset</h3>
<p>Our dataset only has 36 observations (you can see that by the number of rows listed after you ran the last code block). With bigger datasets with millions of observations and maybe hundreds of variables it can be difficult to get a sense of the data by just looking at the raw values. A good starting point is to calculate summary statistics. Summary statistics summarize different aspects of the data, for example the mean, which shows the average value, or the median which shows the value that separates the observations in two equally sized groups. To get a list of summary statistics for all variables in a dataset, we can use the <code>summary()</code> function. Try it out:</p>
<div class="tutorial-exercise" data-label="look3" data-caption="Code" data-completion="1" data-diagnostics="1" data-startover="1" data-lines="0">
<pre class="text"><code># 1. Load the data and store it in the object called wid_data

# 2. View the full dataset</code></pre>
<script type="application/json" data-opts-chunk="1">{"fig.width":6.5,"fig.height":4,"fig.retina":2,"fig.align":"default","fig.keep":"high","fig.show":"asis","out.width":624,"warning":false,"error":false,"message":false,"exercise.df_print":"paged","exercise.checker":"NULL"}</script>
</div>
<div class="tutorial-exercise-support" data-label="look3-hint-1" data-caption="Code" data-completion="1" data-diagnostics="1" data-startover="1" data-lines="0">
<pre class="text"><code># 1. Load the data and store it in the object called wid_data
wid_data&lt;-read_csv(&quot;https://www.hhsievertsen.net/economicdata/src/wid_uk_t1.csv&quot;)
# 2. View the full dataset</code></pre>
</div>
<div class="tutorial-exercise-support" data-label="look3-hint-2" data-caption="Code" data-completion="1" data-diagnostics="1" data-startover="1" data-lines="0">
<pre class="text"><code># 1. Load the data and store it in the object called wid_data
wid_data&lt;-read_csv(&quot;https://www.hhsievertsen.net/economicdata/src/wid_uk_t1.csv&quot;)
# 2. View the full dataset
summary(wid_data)</code></pre>
</div>
<p>Did it work? What is the median income over this period?</p>
<p><div class="panel-heading tutorial-quiz-title">Quiz</div><div class="panel panel-default">
<div data-label="quiz1-1" class="tutorial-question panel-body">
<div id="quiz1-1-answer_container" class="shiny-html-output"></div>
<div id="quiz1-1-message_container" class="shiny-html-output"></div>
<div id="quiz1-1-action_button_container" class="shiny-html-output"></div>
<script>if (Tutorial.triggerMathJax) Tutorial.triggerMathJax()</script>
</div>
</div></p>
</div>
<div id="section-the-content-of-the-dataset---summary" class="section level3">
<h3>The content of the dataset - summary</h3>
<p>That was the third R lecture. You now know how to list the contents of a dataset and how to list some of the most important summary statistics for the variables in a dataset. Here is what we covered</p>
<ul>
<li><code>head(wid_data)</code> prints the first six observations of the dataset <tt>wid_data</tt>.</li>
<li><code>tail(wid_data)</code> prints the last six observations of the dataset <tt>wid_data</tt>.</li>
<li><code>wid_data</code> prints the full dataset <tt>wid_data</tt> (assuming that <tt>wid_data</tt> is a data frame).</li>
<li><code>summary(wid_data)</code> lists summary statistics (min, max, mean, median) for all variables in the data frame <tt>wid_data</tt>.</li>
</ul>
<p>In the next lecture we will modify the variables in <tt>wid_data</tt>.</p>
</div>
</div>
<div id="section-modify-the-data" class="section level2">
<h2>4 Modify the data</h2>
<p><em>In this lecture we will modify the dataset by creating a new variable. We will also look at how we can select specific values or observations.</em></p>
<div id="section-modifying-a-variable-and-creating-new-variables" class="section level3">
<h3>Modifying a variable and creating new variables</h3>
<p>Let’s say that we would like the income shares to be shown in percent instead of in shares between 0 and 1. How could we change the variable or create a new one? We can use the <code>mutate()</code> function to do that. The mutate function is a bit different to the functions we have used so far, because we have to provide two arguments. An argument is what we write in the <code>( )</code> parentheses. The two arguments are the following</p>
<ul>
<li>The dataset we want to change</li>
<li>A description of the variable we want to create or change.</li>
</ul>
<p>Does this sound complicated? Don’t worry, here is an example for you:</p>
<div class="tutorial-exercise" data-label="look4" data-caption="Code" data-completion="1" data-diagnostics="1" data-startover="1" data-lines="0">
<pre class="text"><code># 1. Load the data and store it in the object called wid_data
wid_data&lt;-read_csv(&quot;https://www.hhsievertsen.net/economicdata/src/wid_uk_t1.csv&quot;)
# 2. Create a new variable with income shares in percent
wid_data_pct&lt;-mutate(wid_data,Income_share_pct=100*Income_share)
# 3. List the first six observations 
head(wid_data_pct)</code></pre>
<script type="application/json" data-opts-chunk="1">{"fig.width":6.5,"fig.height":4,"fig.retina":2,"fig.align":"default","fig.keep":"high","fig.show":"asis","out.width":624,"warning":false,"error":false,"message":false,"exercise.df_print":"paged","exercise.checker":"NULL"}</script>
</div>
<p>Line 4 in the code above is the new part. Let’s go through it step by step:</p>
<ul>
<li><p><code>mutate(wid_data,Income_share_pct=100*income_share)</code>: we use the mutate function and…</p>
<ul>
<li>load the <code>wid_data</code> and ask R to</li>
<li>create a new variable, which is <code>100*income_share</code> and call the new variable <code>income_share_pct</code>.</li>
</ul></li>
<li><p>Finally, we use <code>wid_data_pct&lt;-</code>to assign the new dataset, which consists of the old variables and the new variable to the name <tt>wid_data_pct</tt></p></li>
</ul>
<p>We now have two datasets:</p>
<ol style="list-style-type: decimal">
<li><tt>wid_data</tt> which only includes the old variables.</li>
<li><tt>wid_data_pct</tt> which includes the old variables and the new variable.</li>
</ol>
<p>Instead of copying the dataset and storing it under a new name, we could overwrite the old dataset by reusing the name. Try to change the code in the block below to achieve that.</p>
<div class="tutorial-exercise" data-label="look5" data-caption="Code" data-completion="1" data-diagnostics="1" data-startover="1" data-lines="0">
<pre class="text"><code># 1. Load the data and store it in the object called wid_data
wid_data&lt;-read_csv(&quot;https://www.hhsievertsen.net/economicdata/src/wid_uk_t1.csv&quot;)
# 2. Create a new variable with income shares in percent
wid_data_pct&lt;-mutate(wid_data,Income_share_pct=100*Income_share)
# 3. List the first six observations 
head(wid_data_pct)</code></pre>
<script type="application/json" data-opts-chunk="1">{"fig.width":6.5,"fig.height":4,"fig.retina":2,"fig.align":"default","fig.keep":"high","fig.show":"asis","out.width":624,"warning":false,"error":false,"message":false,"exercise.df_print":"paged","exercise.checker":"NULL"}</script>
</div>
<div class="tutorial-exercise-support" data-label="look5-hint-1" data-caption="Code" data-completion="1" data-diagnostics="1" data-startover="1" data-lines="0">
<pre class="text"><code># 1. Load the data and store it in the object called wid_data
wid_data&lt;-read_csv(&quot;https://www.hhsievertsen.net/economicdata/src/wid_uk_t1.csv&quot;)
# 2. Create a new variable with income shares in percent
wid_data&lt;-mutate(wid_data,Income_share_pct=100*Income_share)
# 3. List the first six observations 
head(wid_data)</code></pre>
</div>
<p>Finally, we could also choose to simply overwrite the existing variable instead of creating a new variable. Try to change the code below to achieve that.</p>
<div class="tutorial-exercise" data-label="look6" data-caption="Code" data-completion="1" data-diagnostics="1" data-startover="1" data-lines="0">
<pre class="text"><code># 1. Load the data and store it in the object called wid_data
wid_data&lt;-read_csv(&quot;https://www.hhsievertsen.net/economicdata/src/wid_uk_t1.csv&quot;)
# 2. Create a new variable with income shares in percent
wid_data_pct&lt;-mutate(wid_data,Income_share_pct=100*Income_share)
# 3. List the first six observations 
head(wid_data_pct)</code></pre>
<script type="application/json" data-opts-chunk="1">{"fig.width":6.5,"fig.height":4,"fig.retina":2,"fig.align":"default","fig.keep":"high","fig.show":"asis","out.width":624,"warning":false,"error":false,"message":false,"exercise.df_print":"paged","exercise.checker":"NULL"}</script>
</div>
<div class="tutorial-exercise-support" data-label="look6-hint-1" data-caption="Code" data-completion="1" data-diagnostics="1" data-startover="1" data-lines="0">
<pre class="text"><code># 1. Load the data and store it in the object called wid_data
wid_data&lt;-read_csv(&quot;https://www.hhsievertsen.net/economicdata/src/wid_uk_t1.csv&quot;)
# 2. Overwrite the income share with a new variable with income shares in percent
wid_data_pct&lt;-mutate(wid_data,Income_share=100*Income_share)
# 3. List the first six observations 
head(wid_data_pct)</code></pre>
</div>
<p>Did it work? The printed dataset should only contain two variables: Year and Income_share.</p>
</div>
<div id="section-selecting-specific-variables-or-observations" class="section level3">
<h3>Selecting specific variables or observations</h3>
<p>What if we are only interested in the income shares from 1990 to 2010? We can use the <code>filter()</code> function to “filter” the dataset in such a way that only the observations of interest remain. This function has the same syntax as the <code>mutate()</code> function. We first enter the name of the object that contains the dataset, and then write or filter condition. To select the observations for 1990 to 2010 we would write the following <code>filter(wid_data,Year&gt;1989 &amp; Year&lt;2011)</code>. Can you change the following code to only include observations for the years 1989 to 2005?</p>
<div class="tutorial-exercise" data-label="look7" data-caption="Code" data-completion="1" data-diagnostics="1" data-startover="1" data-lines="0">
<pre class="text"><code># 1. Load the data and store it in the object called wid_data
wid_data&lt;-read_csv(&quot;https://www.hhsievertsen.net/economicdata/src/wid_uk_t1.csv&quot;)
# 2. Filter the observations between 1990 and 2010 
wid_data_filtered&lt;-filter(wid_data,Year&gt;1989 &amp; Year&lt;2011)
# 3. View the new dataset
wid_data_filtered</code></pre>
<script type="application/json" data-opts-chunk="1">{"fig.width":6.5,"fig.height":4,"fig.retina":2,"fig.align":"default","fig.keep":"high","fig.show":"asis","out.width":624,"warning":false,"error":false,"message":false,"exercise.df_print":"paged","exercise.checker":"NULL"}</script>
</div>
<div class="tutorial-exercise-support" data-label="look7-hint-1" data-caption="Code" data-completion="1" data-diagnostics="1" data-startover="1" data-lines="0">
<pre class="text"><code># 1. Load the data and store it in the object called wid_data
wid_data&lt;-read_csv(&quot;https://www.hhsievertsen.net/economicdata/src/wid_uk_t1.csv&quot;)
# 2. Filter the observations between 1990 and 2006
wid_data_filtered&lt;-filter(wid_data,Year&gt;1989 &amp; Year&lt;2006)
# 3.View the new dataset
wid_data_filtered</code></pre>
</div>
<p>We can also select specific variables to keep in our dataset. We use <code>filter()</code> to <em>filter</em> observations and <code>select()</code> to <em>select</em> variables to include or exclude. We use this function in the same way, as we used the <code>filter()</code> and <code>mutate()</code> functions. We first write the dataset and then the variables we want to keep (or not keep). If we wanted to only keep the <tt>Year</tt> variable we would write</p>
<ul>
<li>Name the variable we want to select: <code>select(wid_data,Year)</code></li>
<li>Name the variable we want to exclude with a “-” sign: <code>select(wid_data,-Income share)</code></li>
<li>Keep the first variable by numbering it : <code>select(wid_data,1)</code></li>
<li>Exclude the second variable : <code>select(wid_data,-2)</code></li>
</ul>
<div class="tutorial-exercise" data-label="look8" data-caption="Code" data-completion="1" data-diagnostics="1" data-startover="1" data-lines="0">
<pre class="text"><code># 1. Load the data and store it in the object called wid_data
wid_data&lt;-read_csv(&quot;https://www.hhsievertsen.net/economicdata/src/wid_uk_t1.csv&quot;)
# 2. Select only the Year variable.
select(wid_data,Year)</code></pre>
<script type="application/json" data-opts-chunk="1">{"fig.width":6.5,"fig.height":4,"fig.retina":2,"fig.align":"default","fig.keep":"high","fig.show":"asis","out.width":624,"warning":false,"error":false,"message":false,"exercise.df_print":"paged","exercise.checker":"NULL"}</script>
</div>
<div class="tutorial-exercise-support" data-label="look8-hint-1" data-caption="Code" data-completion="1" data-diagnostics="1" data-startover="1" data-lines="0">
<pre class="text"><code># 1. Load the data and store it in the object called wid_data
wid_data&lt;-read_csv(&quot;https://www.hhsievertsen.net/economicdata/src/wid_uk_t1.csv&quot;)
# 2. Select only the Year variable.
select(wid_data,Income_share)</code></pre>
</div>
<div class="tutorial-exercise-support" data-label="look8-hint-2" data-caption="Code" data-completion="1" data-diagnostics="1" data-startover="1" data-lines="0">
<pre class="text"><code># 1. Load the data and store it in the object called wid_data
wid_data&lt;-read_csv(&quot;https://www.hhsievertsen.net/economicdata/src/wid_uk_t1.csv&quot;)
# 2. Exclude the Income_share variable.
select(wid_data,-Income_share)</code></pre>
</div>
<div class="tutorial-exercise-support" data-label="look8-hint-3" data-caption="Code" data-completion="1" data-diagnostics="1" data-startover="1" data-lines="0">
<pre class="text"><code># 1. Load the data and store it in the object called wid_data
wid_data&lt;-read_csv(&quot;https://www.hhsievertsen.net/economicdata/src/wid_uk_t1.csv&quot;)
# 2. Include teh first observation
select(wid_data,1)</code></pre>
</div>
<div class="tutorial-exercise-support" data-label="look8-hint-4" data-caption="Code" data-completion="1" data-diagnostics="1" data-startover="1" data-lines="0">
<pre class="text"><code># 1. Load the data and store it in the object called wid_data
wid_data&lt;-read_csv(&quot;https://www.hhsievertsen.net/economicdata/src/wid_uk_t1.csv&quot;)
# 2. Exclude the second observations
select(wid_data,-2)</code></pre>
</div>
<p>Did you note that in the example above we did not overwrite the old dataset object <tt>wid_data</tt> or create a new dataset. Instead we simply let R print the new dataset. The downside of this approach is that we don’t save the newly created dataset.</p>
<p>If we want to remove several variables, we can simply list the variables we want to keep. We can also provide a numbered range. The code block below (and the hints) shows some examples. Try them out!</p>
<div class="tutorial-exercise" data-label="look9" data-caption="Code" data-completion="1" data-diagnostics="1" data-startover="1" data-lines="0">
<pre class="text"><code># 1. Load the data and store it in the object called wid_data
wid_data&lt;-read_csv(&quot;https://www.hhsievertsen.net/economicdata/src/wid_uk_t1.csv&quot;)
# 2. Keep the first and second variable
select(wid_data,1:2)</code></pre>
<script type="application/json" data-opts-chunk="1">{"fig.width":6.5,"fig.height":4,"fig.retina":2,"fig.align":"default","fig.keep":"high","fig.show":"asis","out.width":624,"warning":false,"error":false,"message":false,"exercise.df_print":"paged","exercise.checker":"NULL"}</script>
</div>
<div class="tutorial-exercise-support" data-label="look9-hint-1" data-caption="Code" data-completion="1" data-diagnostics="1" data-startover="1" data-lines="0">
<pre class="text"><code># 1. Load the data and store it in the object called wid_data
wid_data&lt;-read_csv(&quot;https://www.hhsievertsen.net/economicdata/src/wid_uk_t1.csv&quot;)
# 2. remove the first and second variable
select(wid_data,-(1:2))</code></pre>
</div>
<div class="tutorial-exercise-support" data-label="look9-hint-2" data-caption="Code" data-completion="1" data-diagnostics="1" data-startover="1" data-lines="0">
<pre class="text"><code># 1. Load the data and store it in the object called wid_data
wid_data&lt;-read_csv(&quot;https://www.hhsievertsen.net/economicdata/src/wid_uk_t1.csv&quot;)
# 2. Keep variable Year and variable Income_share
select(wid_data,Year,Income_share)</code></pre>
</div>
</div>
<div id="section-modifying-data---summary" class="section level3">
<h3>Modifying data - summary</h3>
<p>In this section we’ve covered the following topics</p>
<ul>
<li>create and change variables using the <code>mutate()</code> function.</li>
<li>select specific observations using the <code>filter()</code> function.</li>
<li>select specific variables using the <code>filter()</code> function.</li>
</ul>
<p>Let’s end this lecture with a quiz question</p>
<p><div class="panel-heading tutorial-quiz-title">Quiz</div><div class="panel panel-default">
<div data-label="quiz2-1" class="tutorial-question panel-body">
<div id="quiz2-1-answer_container" class="shiny-html-output"></div>
<div id="quiz2-1-message_container" class="shiny-html-output"></div>
<div id="quiz2-1-action_button_container" class="shiny-html-output"></div>
<script>if (Tutorial.triggerMathJax) Tutorial.triggerMathJax()</script>
</div>
</div></p>
<p>Let’s move on to lecture 5 and merge some data.</p>
</div>
</div>
<div id="section-merge-data" class="section level2">
<h2>5 Merge data</h2>
<p><em>In this lecture we will combine several datasets</em></p>
<div id="section-merging-datasets" class="section level3">
<h3>Merging datasets</h3>
<p>So far we’ve only worked with one dataset. The dataset we’ve used is from the World Income Database and contained the income shares of the top 1pct. in the United Kingdom. The World Income Database also provides income shares for the bottom 50pct in the the United Kingdom. Our task is now to merge these two datasets to one dataset. The following code block loads both datasets, stores the datasets under two different names and then displays the first six observations. Have a look at each line in the code. Do you understand what the line is doing? Click “Run Code” and have a look at the output.</p>
<div class="tutorial-exercise" data-label="merge1" data-caption="Code" data-completion="1" data-diagnostics="1" data-startover="1" data-lines="0">
<pre class="text"><code># 1. Load the data with income shares for the top 1pct
wid_data_t1&lt;-read_csv(&quot;https://www.hhsievertsen.net/economicdata/src/wid_uk_t1.csv&quot;)
# 2. Load the data with income shares for the bottom 50pct
wid_data_b50&lt;-read_csv(&quot;https://www.hhsievertsen.net/economicdata/src/wid_uk_b50.csv&quot;)
# 3. Display the first six boservations of wid_data_t1
head(wid_data_t1)
# 4. Display the first six boservations of wid_data_b50
head(wid_data_b50)</code></pre>
<script type="application/json" data-opts-chunk="1">{"fig.width":6.5,"fig.height":4,"fig.retina":2,"fig.align":"default","fig.keep":"high","fig.show":"asis","out.width":624,"warning":false,"error":false,"message":false,"exercise.df_print":"paged","exercise.checker":"NULL"}</script>
</div>
<p>The output shows us that both datasets have two variables, Year and Income_share. The dataset with the income share for the top 1pct starts in 1981. The dataset with the income share for the bottom 50pct starts in 1981, but the first observation is missing. That is what the NA means (not available). Let’s say we want to create a new dataset that contains the variable Year, a variable called Income_share_t1 (with the income share for the top 1pct), and a variable called Income_share_b50 (with the income share for the bottom 50pct). To achieve this we need to use the following:</p>
<ul>
<li>a method to merge datasets. We will use <code>merge()</code></li>
<li>a method to rename a variable (because income shares needs to be renamed). We will use <code>rename()</code></li>
</ul>
How do these functions work? Let’s look at the help file for merge (we can find the help file by by typing “?merge”).
<div class="tutorial-exercise" data-label="merge2" data-caption="Code" data-completion="1" data-diagnostics="1" data-startover="1" data-lines="0">
<pre class="text"><code># Check the help file for the join function</code></pre>
<script type="application/json" data-opts-chunk="1">{"fig.width":6.5,"fig.height":4,"fig.retina":2,"fig.align":"default","fig.keep":"high","fig.show":"asis","out.width":624,"warning":false,"error":false,"message":false,"exercise.df_print":"paged","exercise.checker":"NULL"}</script>
</div>
<div class="tutorial-exercise-support" data-label="merge2-hint-1" data-caption="Code" data-completion="1" data-diagnostics="1" data-startover="1" data-lines="0">
<pre class="text"><code># Check the help file for the join function
?merge</code></pre>
</div>
<p>This gives us the following documentation (it might look different for you, because you are using a browser. Don’t worry.).</p>
<p><img src="http://hhsievertsen.net/economicdata/src/fig1.png" width="60%" /></p>
<p>what does this mean?</p>
<ol style="list-style-type: decimal">
<li><p>The basic syntax of the merge function is shown under <strong>Usage</strong>:</p>
<p><code>merge(x, y, ...)</code></p></li>
<li><p>To understand the Usage we look for the descriptions of these “arguments” (an argument is an option stated within a function’s parentheses).</p></li>
</ol>
<ul>
<li><code>x</code> is a data frame</li>
<li><code>y</code> is a data frame
<ul>
<li>In words: the first argument of a <code>merge(...)</code> is a dataset (called <code>x</code>), and the second argument is a second dataset (called <code>y</code>). These two datasets are the datasets we want to merge.</li>
</ul></li>
<li><code>by</code> is a vector that explains what we want to use to merge the two datasets. So in the example above we would “Year” to join the two datasets. This means that we pair rows where the value of the variable “Year” are the same. In other words the row with Year equal 1993 in dataset x is paired with the row with Year equal 1993 in dataset y.</li>
</ul>
<p>Now we know how we use the merge dataset. In our case above we would write:</p>
<ul>
<li><code>merge(x=wid_data_t1,y=wid_data_b50, by="Year")</code></li>
</ul>
<p>Let’s now move to the renaming issue. Before we join the two datasets we want to rename the Income_share variable. We could take a look at the R documentation for that, but I’ll help you. We’ll use the <code>rename()</code> function that is closely related to <code>mutate()</code>, <code>select()</code> and the <code>filter()</code> functions we’ve used. The sturcture is therefore the same. We first enter the dataset where we want to rename a variable and then state the renaming expression:</p>
<ul>
<li><code>rename(dataset, new name=old name)</code></li>
</ul>
<p>In the example from above:</p>
<ul>
<li><code>rename(wid_data_t1,Income_share_t1=Income_share)</code></li>
</ul>
It’s your turn. Insert all the code pieces we’ve discussed in this section to combine the two datasets into one dataset in the code block below. The hints button provides answers if you are stuck.
<div class="tutorial-exercise" data-label="merge3" data-caption="Code" data-completion="1" data-diagnostics="1" data-startover="1" data-lines="0">
<pre class="text"><code># 1. Load the data with income shares for the top 1pct
wid_data_t1&lt;-read_csv(&quot;https://www.hhsievertsen.net/economicdata/src/wid_uk_t1.csv&quot;)
# 2. Load the data with income shares for the bottom 50pct
wid_data_b50&lt;-read_csv(&quot;https://www.hhsievertsen.net/economicdata/src/wid_uk_b50.csv&quot;)
# 3. Rename the income share variable in the top 1pct dataset and overwrite the original datasetet

# 4. Rename the income share variable in the bottom 50pct dataset and overwrite the original dataset

# 5. Merge the two datasets and save as a new dataset called wid_data_merged

# 6. Display the first six observations in wid_data_merged</code></pre>
<script type="application/json" data-opts-chunk="1">{"fig.width":6.5,"fig.height":4,"fig.retina":2,"fig.align":"default","fig.keep":"high","fig.show":"asis","out.width":624,"warning":false,"error":false,"message":false,"exercise.df_print":"paged","exercise.checker":"NULL"}</script>
</div>
<div class="tutorial-exercise-support" data-label="merge3-hint-1" data-caption="Code" data-completion="1" data-diagnostics="1" data-startover="1" data-lines="0">
<pre class="text"><code># 1. Load the data with income shares for the top 1pct
wid_data_t1&lt;-read_csv(&quot;https://www.hhsievertsen.net/economicdata/src/wid_uk_t1.csv&quot;)
# 2. Load the data with income shares for the bottom 50pct
wid_data_b50&lt;-read_csv(&quot;https://www.hhsievertsen.net/economicdata/src/wid_uk_b50.csv&quot;)
# 3. Rename the income share variable in the top 1pct dataset and overwrite the original datasetet
wid_data_t1&lt;-rename(wid_data_t1,Income_share_t1=Income_share)</code></pre>
</div>
<div class="tutorial-exercise-support" data-label="merge3-hint-2" data-caption="Code" data-completion="1" data-diagnostics="1" data-startover="1" data-lines="0">
<pre class="text"><code># 1. Load the data with income shares for the top 1pct
wid_data_t1&lt;-read_csv(&quot;https://www.hhsievertsen.net/economicdata/src/wid_uk_t1.csv&quot;)
# 2. Load the data with income shares for the bottom 50pct
wid_data_b50&lt;-read_csv(&quot;https://www.hhsievertsen.net/economicdata/src/wid_uk_b50.csv&quot;)
# 3. Rename the income share variable in the top 1pct dataset and overwrite the original datasetet
wid_data_t1&lt;-rename(wid_data_t1,Income_share_t1=Income_share)
# 4. Rename the income share variable in the bottom 50pct dataset and overwrite the original dataset
wid_data_b50&lt;-rename(wid_data_b50,Income_share_b50=Income_share)</code></pre>
</div>
<div class="tutorial-exercise-support" data-label="merge3-hint-3" data-caption="Code" data-completion="1" data-diagnostics="1" data-startover="1" data-lines="0">
<pre class="text"><code># 1. Load the data with income shares for the top 1pct
wid_data_t1&lt;-read_csv(&quot;https://www.hhsievertsen.net/economicdata/src/wid_uk_t1.csv&quot;)
# 2. Load the data with income shares for the bottom 50pct
wid_data_b50&lt;-read_csv(&quot;https://www.hhsievertsen.net/economicdata/src/wid_uk_b50.csv&quot;)
# 3. Rename the income share variable in the top 1pct dataset and overwrite the original datasetet
wid_data_t1&lt;-rename(wid_data_t1,Income_share_t1=Income_share)
# 4. Rename the income share variable in the bottom 50pct dataset and overwrite the original dataset
wid_data_b50&lt;-rename(wid_data_b50,Income_share_b50=Income_share)
# 5. Merge the two datasets and save as a new dataset called  wid_data_merged
wid_data_merged&lt;-merge(x=wid_data_t1,y=wid_data_b50,by=&quot;Year&quot;)</code></pre>
</div>
<div class="tutorial-exercise-support" data-label="merge3-hint-4" data-caption="Code" data-completion="1" data-diagnostics="1" data-startover="1" data-lines="0">
<pre class="text"><code># 1. Load the data with income shares for the top 1pct
wid_data_t1&lt;-read_csv(&quot;https://www.hhsievertsen.net/economicdata/src/wid_uk_t1.csv&quot;)
# 2. Load the data with income shares for the bottom 50pct
wid_data_b50&lt;-read_csv(&quot;https://www.hhsievertsen.net/economicdata/src/wid_uk_b50.csv&quot;)
# 3. Rename the income share variable in the top 1pct dataset and overwrite the original datasetet
wid_data_t1&lt;-rename(wid_data_t1,Income_share_t1=Income_share)
# 4. Rename the income share variable in the bottom 50pct dataset and overwrite the original dataset
wid_data_b50&lt;-rename(wid_data_b50,Income_share_b50=Income_share)
# 5. Merge the two datasets and save as a new dataset called  wid_data_merged
wid_data_merged&lt;-merge(x=wid_data_t1,y=wid_data_b50,by=&quot;Year&quot;)
# 6. Display the first six observations in wid_data_merged
head(wid_data_merged)</code></pre>
</div>
<p>The output should look as follows:</p>
<p><img src="http://hhsievertsen.net/economicdata/src/fig2.png" width="60%" /></p>
<p>Could we avoid some steps in the code above? What if we could rename the variables and merge the datasets in one line? Yes we can. We cannot directly rename the variable, but we can specify a term to add to the end of the name of variable. In the following code block I’ve remove removed the rename function and instead added an additional argumetn to the merge function. Take a good look at the code below, try to run it and answer the quiz below.</p>
<div class="tutorial-exercise" data-label="merge4" data-caption="Code" data-completion="1" data-diagnostics="1" data-startover="1" data-lines="0">
<pre class="text"><code># 1. Load the data with income shares for the top 1pct
wid_data_t1&lt;-read_csv(&quot;https://www.hhsievertsen.net/economicdata/src/wid_uk_t1.csv&quot;)
# 2. Load the data with income shares for the bottom 50pct
wid_data_b50&lt;-read_csv(&quot;https://www.hhsievertsen.net/economicdata/src/wid_uk_b50.csv&quot;)
# 3. Merge the two datasets and save as a new dataset called  wid_data_merged. 
# NOTE: Add the term &quot;_t1&quot; to all variables that are only in the first dataset 
# and the term &quot;_b50&quot; to all variables that only in the second dataset.
wid_data_merged&lt;-merge(x=wid_data_t1,y=wid_data_b50,by=&quot;Year&quot;,suffix=c(&#39;_t1&#39;,&#39;_b50&#39;))
# 4. Display the first six observations in wid_data_merged
head(wid_data_merged)</code></pre>
<script type="application/json" data-opts-chunk="1">{"fig.width":6.5,"fig.height":4,"fig.retina":2,"fig.align":"default","fig.keep":"high","fig.show":"asis","out.width":624,"warning":false,"error":false,"message":false,"exercise.df_print":"paged","exercise.checker":"NULL"}</script>
</div>
<p><div class="panel-heading tutorial-quiz-title">Quiz</div><div class="panel panel-default">
<div data-label="quiz3-1" class="tutorial-question panel-body">
<div id="quiz3-1-answer_container" class="shiny-html-output"></div>
<div id="quiz3-1-message_container" class="shiny-html-output"></div>
<div id="quiz3-1-action_button_container" class="shiny-html-output"></div>
<script>if (Tutorial.triggerMathJax) Tutorial.triggerMathJax()</script>
</div>
</div></p>
<p>Well done! We’ve managed to combine two datasets. What we would like to stack two datasets on top of each other?</p>
</div>
<div id="section-appending-two-datasets." class="section level3">
<h3>Appending two datasets.</h3>
<p>Based on data from the World Inequality Database, we’ve created a dataset on income shares for the top 1pct and bottom 50pct in the United Kingdom. What if we had a similar dataset at hand for the World and we wanted combine it all in one dataset to create one nice chart.</p>
Let’s first have a look at the two dataset. The code block below is ready to run, but you should read each line and make sure that you understand what is going on.
<div class="tutorial-exercise-support" data-label="prepare-prep1" data-caption="Code" data-completion="1" data-diagnostics="1" data-startover="1" data-lines="0">
<pre class="text"><code># 1. Load the data with income shares for the top 1pct in the UK
wid_data_t1_UK&lt;-read_csv(&quot;https://www.hhsievertsen.net/economicdata/src/wid_uk_t1.csv&quot;)
# 2. Load the data with income shares for the bottom 50pct in the UK 
wid_data_b50_UK&lt;-read_csv(&quot;https://www.hhsievertsen.net/economicdata/src/wid_uk_b50.csv&quot;)
# 3. Merge the two datasets and save as a new dataset called  wid_data_merged_UK
wid_data_merged_UK&lt;-merge(x=wid_data_t1_UK,y=wid_data_b50_UK,by=&quot;Year&quot;,suffix=c(&#39;_t1&#39;,&#39;_b50&#39;))

# 5. Load the data with income shares for the top 1pct in the World
wid_data_t1_WORLD&lt;-read_csv(&quot;https://www.hhsievertsen.net/economicdata/src/wid_world_t1.csv&quot;)
# 6. Load the data with income shares for the bottom 50pct in the World 
wid_data_b50_WORLD&lt;-read_csv(&quot;https://www.hhsievertsen.net/economicdata/src/wid_world_b50.csv&quot;)
# 7. Merge the two datasets and save as a new dataset called  wid_data_merged_World
wid_data_merged_WORLD&lt;-merge(x=wid_data_t1_WORLD,y=wid_data_b50_WORLD,by=&quot;Year&quot;,suffix=c(&#39;_t1&#39;,&#39;_b50&#39;))</code></pre>
</div>
<div class="tutorial-exercise" data-label="merge5" data-caption="Code" data-completion="1" data-diagnostics="1" data-startover="1" data-lines="0">
<pre class="text"><code># 1. Display the first six observations in wid_data_merged_UK
head(wid_data_merged_UK)
# 2. Display the first six observations in wid_data_merged_WORLD
head(wid_data_merged_WORLD)</code></pre>
<script type="application/json" data-opts-chunk="1">{"fig.width":6.5,"fig.height":4,"fig.retina":2,"fig.align":"default","fig.keep":"high","fig.show":"asis","out.width":624,"warning":false,"error":false,"message":false,"exercise.df_print":"paged","exercise.setup":"prepare-prep1","exercise.checker":"NULL"}</script>
</div>
<p>We could merge the two datasets for the World and the UK just like we did in the last section. But that would be ideal, because then we would have a column named “Income_share_b50_UK” and a column named “Income_share_b50_WORLD”. Income_share_b50_WORLD would combine two variables in one column: Income_share_b50 and Region. We should always aim at having one variable in one column. Instead we want to stack the two datasets on top of each other and add a region variable.</p>
<p>Let’s first create a region variable. You already know how to do it. (Hint: use <code>mutate</code>). Fill out the gap in the following code block to add a region variable to the dataset <code>wid_data_t1_WORLD</code> (after 2.):</p>
<div class="tutorial-exercise-support" data-label="prepare-prep2" data-caption="Code" data-completion="1" data-diagnostics="1" data-startover="1" data-lines="0">
<pre class="text"><code># 1. Load the data with income shares for the top 1pct in the UK
wid_data_t1_UK&lt;-read_csv(&quot;https://www.hhsievertsen.net/economicdata/src/wid_uk_t1.csv&quot;)
# 2. Load the data with income shares for the bottom 50pct in the UK 
wid_data_b50_UK&lt;-read_csv(&quot;https://www.hhsievertsen.net/economicdata/src/wid_uk_b50.csv&quot;)
# 3. Merge the two datasets and save as a new dataset called  wid_data_merged_UK
wid_data_merged_UK&lt;-merge(x=wid_data_t1_UK,y=wid_data_b50_UK,by=&quot;Year&quot;,suffix=c(&#39;_t1&#39;,&#39;_b50&#39;))

# 5. Load the data with income shares for the top 1pct in the World
wid_data_t1_WORLD&lt;-read_csv(&quot;https://www.hhsievertsen.net/economicdata/src/wid_world_t1.csv&quot;)
# 6. Load the data with income shares for the bottom 50pct in the World 
wid_data_b50_WORLD&lt;-read_csv(&quot;https://www.hhsievertsen.net/economicdata/src/wid_world_b50.csv&quot;)
# 7. Merge the two datasets and save as a new dataset called  wid_data_merged_World
wid_data_merged_WORLD&lt;-merge(x=wid_data_t1_WORLD,y=wid_data_b50_WORLD,by=&quot;Year&quot;,suffix=c(&#39;_t1&#39;,&#39;_b50&#39;))</code></pre>
</div>
<div class="tutorial-exercise" data-label="merge6" data-caption="Code" data-completion="1" data-diagnostics="1" data-startover="1" data-lines="0">
<pre class="text"><code># 1. Add a variable capturing the region to dataset wid_data_merged_UK
wid_data_merged_UK&lt;-mutate(wid_data_merged_UK,region=&quot;UK&quot;)
# 2. Add a variable capturing the region  to dataset wid_data_merged_WORLD

# 3. Display the first six observations in wid_data_merged_WORLD</code></pre>
<script type="application/json" data-opts-chunk="1">{"fig.width":6.5,"fig.height":4,"fig.retina":2,"fig.align":"default","fig.keep":"high","fig.show":"asis","out.width":624,"warning":false,"error":false,"message":false,"exercise.df_print":"paged","exercise.setup":"prepare-prep2","exercise.checker":"NULL"}</script>
</div>
<div class="tutorial-exercise-support" data-label="merge6-hint-1" data-caption="Code" data-completion="1" data-diagnostics="1" data-startover="1" data-lines="0">
<pre class="text"><code># 1. Add a variable capturing the region to dataset wid_data_merged_UK
wid_data_merged_UK&lt;-mutate(wid_data_merged_UK,region=&quot;UK&quot;)
# 2. Add a variable capturing the region  to dataset wid_data_merged_WORLD
wid_data_merged_WORLD&lt;-mutate(wid_data_merged_WORLD,region=&quot;WORLD&quot;)
# 3. Display the first six observations in wid_data_merged_WORLD</code></pre>
</div>
<div class="tutorial-exercise-support" data-label="merge6-hint-2" data-caption="Code" data-completion="1" data-diagnostics="1" data-startover="1" data-lines="0">
<pre class="text"><code># 1. Add a variable capturing the region to dataset wid_data_merged_UK
wid_data_merged_UK&lt;-mutate(wid_data_merged_UK,region=&quot;UK&quot;)
# 2. Add a variable capturing the region  to dataset wid_data_merged_WORLD
wid_data_merged_WORLD&lt;-mutate(wid_data_merged_WORLD,region=&quot;WORLD&quot;)
# 3. Display the first six observations in wid_data_merged_WORLD
head(wid_data_merged_WORLD)</code></pre>
</div>
Great work! Let’s now append the two datasets. we can do this with the <code>rbind()</code> function which binds two datasets by the row dimension. * <code>rbind(wid_data_merged_UK,wid_data_merged_WORLD)</code> will stack the two datasets above each other. Add this to to the code block below and save the new dataset under the name <code>wid_data</code>.
<div class="tutorial-exercise-support" data-label="prepare-prep3" data-caption="Code" data-completion="1" data-diagnostics="1" data-startover="1" data-lines="0">
<pre class="text"><code># 1. Load the data with income shares for the top 1pct in the UK
wid_data_t1_UK&lt;-read_csv(&quot;https://www.hhsievertsen.net/economicdata/src/wid_uk_t1.csv&quot;)
# 2. Load the data with income shares for the bottom 50pct in the UK 
wid_data_b50_UK&lt;-read_csv(&quot;https://www.hhsievertsen.net/economicdata/src/wid_uk_b50.csv&quot;)
# 3. Merge the two datasets and save as a new dataset called  wid_data_merged_UK
wid_data_merged_UK&lt;-merge(x=wid_data_t1_UK,y=wid_data_b50_UK,by=&quot;Year&quot;,suffix=c(&#39;_t1&#39;,&#39;_b50&#39;))

# 5. Load the data with income shares for the top 1pct in the World
wid_data_t1_WORLD&lt;-read_csv(&quot;https://www.hhsievertsen.net/economicdata/src/wid_world_t1.csv&quot;)
# 6. Load the data with income shares for the bottom 50pct in the World 
wid_data_b50_WORLD&lt;-read_csv(&quot;https://www.hhsievertsen.net/economicdata/src/wid_world_b50.csv&quot;)
# 7. Merge the two datasets and save as a new dataset called  wid_data_merged_World
wid_data_merged_WORLD&lt;-merge(x=wid_data_t1_WORLD,y=wid_data_b50_WORLD,by=&quot;Year&quot;,suffix=c(&#39;_t1&#39;,&#39;_b50&#39;))
# Region
wid_data_merged_WORLD&lt;-mutate(wid_data_merged_WORLD,region=&quot;WORLD&quot;)
wid_data_merged_UK&lt;-mutate(wid_data_merged_UK,region=&quot;UK&quot;)</code></pre>
</div>
<div class="tutorial-exercise" data-label="merge7" data-caption="Code" data-completion="1" data-diagnostics="1" data-startover="1" data-lines="0">
<pre class="text"><code># 1. Stack the two datasets on top of each other and save the new dataset as wid_data_full

# 2. Display the first six observations in wid_data
head(wid_data_full)
# 3. Display the last six observations in wid_data
tail(wid_data_full)</code></pre>
<script type="application/json" data-opts-chunk="1">{"fig.width":6.5,"fig.height":4,"fig.retina":2,"fig.align":"default","fig.keep":"high","fig.show":"asis","out.width":624,"warning":false,"error":false,"message":false,"exercise.df_print":"paged","exercise.setup":"prepare-prep3","exercise.checker":"NULL"}</script>
</div>
<div class="tutorial-exercise-support" data-label="merge7-hint-1" data-caption="Code" data-completion="1" data-diagnostics="1" data-startover="1" data-lines="0">
<pre class="text"><code># 1. Stack the two datasets on top of each other and save the new dataset as wid_data_full
wid_data_full&lt;-rbind(wid_data_merged_UK,wid_data_merged_WORLD)
# 2. Display the first six observations in wid_data
head(wid_data_full)
# 3. Display the last six observations in wid_data
tail(wid_data_full)</code></pre>
</div>
<p>We should now have a full dataset with variables Year, Income_share_t1, Income_share_b50, and region. The first six observations displayed above should be for the UK and the last six for the WORLD, because we stack the UK dataset on top of the the WORLD dataset.</p>
</div>
<div id="section-merging-data---summary" class="section level3">
<h3>Merging data - summary</h3>
<p>We have now combined several datasets either by matching rows for specific variables in two datasets or by stacking two datasets above of eacher. We have covered the following functions and topics in this lecture</p>
<ul>
<li><code>merge()</code> to merge two datasets</li>
<li><code>rename()</code> to rename a variable.</li>
<li><code>rbind()</code> to stack two datasets.</li>
</ul>
</div>
</div>
<div id="section-slightly-advanced-charts" class="section level2">
<h2>6 Slightly advanced charts</h2>
<p><em>In this lecture we will create a slightly more advanced chart.</em></p>
<div id="section-plotting-several-lines-in-a-chart-using-a-grouping-variable" class="section level3">
<h3>Plotting several lines in a chart using a grouping variable</h3>
In the last section we merged data sets containing top 1pct income shares with data sets containing the bottom 50pct income share. We also appended the dataset for the UK and the dataset for the World. We can now use the combined dataset to create a chart with several groups. Recall how we created the first chart. Let’s use that code from the first lecture on our new dataset “wid_data_full”. The following code block is ready to run:
<div class="tutorial-exercise-support" data-label="prepare-prep4" data-caption="Code" data-completion="1" data-diagnostics="1" data-startover="1" data-lines="0">
<pre class="text"><code># 1. Load the data with income shares for the top 1pct in the UK
wid_data_t1_UK&lt;-read_csv(&quot;https://www.hhsievertsen.net/economicdata/src/wid_uk_t1.csv&quot;)
# 2. Load the data with income shares for the bottom 50pct in the UK 
wid_data_b50_UK&lt;-read_csv(&quot;https://www.hhsievertsen.net/economicdata/src/wid_uk_b50.csv&quot;)
# 3. Merge the two datasets and save as a new dataset called  wid_data_merged_UK
wid_data_merged_UK&lt;-merge(x=wid_data_t1_UK,y=wid_data_b50_UK,by=&quot;Year&quot;,suffix=c(&#39;_t1&#39;,&#39;_b50&#39;))
# 6. Load the data with income shares for the top 1pct in the World
wid_data_t1_WORLD&lt;-read_csv(&quot;https://www.hhsievertsen.net/economicdata/src/wid_world_t1.csv&quot;)
# 7. Load the data with income shares for the bottom 50pct in the World 
wid_data_b50_WORLD&lt;-read_csv(&quot;https://www.hhsievertsen.net/economicdata/src/wid_world_b50.csv&quot;)
# 8. Merge the two datasets and save as a new dataset called  wid_data_merged_World
wid_data_merged_WORLD&lt;-merge(x=wid_data_t1_WORLD,y=wid_data_b50_WORLD,by=&quot;Year&quot;,suffix=c(&#39;_t1&#39;,&#39;_b50&#39;))
# 1. Add a variable capturing the region to dataset wid_data_merged_UK
wid_data_merged_UK&lt;-mutate(wid_data_merged_UK,region=&quot;UK&quot;)
# 2. Add a variable capturing the region  to dataset wid_data_merged_WORLD
wid_data_merged_WORLD&lt;-mutate(wid_data_merged_WORLD,region=&quot;WORLD&quot;)
# combine
wid_data_full&lt;-rbind(wid_data_merged_UK,wid_data_merged_WORLD)</code></pre>
</div>
<div class="tutorial-exercise" data-label="adv-chart1" data-caption="Code" data-completion="1" data-diagnostics="1" data-startover="1" data-lines="0">
<pre class="text"><code>ggplot(data=wid_data_full,aes(x=Year,y=Income_share_t1))+geom_line()</code></pre>
<script type="application/json" data-opts-chunk="1">{"fig.width":6.5,"fig.height":4,"fig.retina":2,"fig.align":"default","fig.keep":"high","fig.show":"asis","out.width":624,"warning":false,"error":false,"message":false,"exercise.df_print":"paged","exercise.setup":"prepare-prep4","exercise.checker":"NULL"}</script>
</div>
<p>Oh this doesn’t look right. What do you think is going on?</p>
<p><div class="panel-heading tutorial-quiz-title">Quiz</div><div class="panel panel-default">
<div data-label="quiz4-1" class="tutorial-question panel-body">
<div id="quiz4-1-answer_container" class="shiny-html-output"></div>
<div id="quiz4-1-message_container" class="shiny-html-output"></div>
<div id="quiz4-1-action_button_container" class="shiny-html-output"></div>
<script>if (Tutorial.triggerMathJax) Tutorial.triggerMathJax()</script>
</div>
</div></p>
<p>Our first chart was very simple. It just showed one variable for one country. Now we would like to two variables for two regions. Let’s say that we would like to have two lines with the top 1pct income share. One for the UK and one for the World. And we would like be able to identify these by different colours. We use the <code>colour</code> aspect of the aesthetics mappings:</p>
<ul>
<li><code>aes(x=Year,y=Income_share_t1,colour=region)</code></li>
</ul>
The aesthetics instruction above tell R to create several lines. These lines should be separated by colour and the identify for the groups is given by the region variable. Let’s try it. Just insert the code above in our original code in the block below and run the code:
<div class="tutorial-exercise-support" data-label="prepare-prep5" data-caption="Code" data-completion="1" data-diagnostics="1" data-startover="1" data-lines="0">
<pre class="text"><code># 1. Load the data with income shares for the top 1pct in the UK
wid_data_t1_UK&lt;-read_csv(&quot;https://www.hhsievertsen.net/economicdata/src/wid_uk_t1.csv&quot;)
# 2. Load the data with income shares for the bottom 50pct in the UK 
wid_data_b50_UK&lt;-read_csv(&quot;https://www.hhsievertsen.net/economicdata/src/wid_uk_b50.csv&quot;)
# 3. Merge the two datasets and save as a new dataset called  wid_data_merged_UK
wid_data_merged_UK&lt;-merge(x=wid_data_t1_UK,y=wid_data_b50_UK,by=&quot;Year&quot;,suffix=c(&#39;_t1&#39;,&#39;_b50&#39;))
# 6. Load the data with income shares for the top 1pct in the World
wid_data_t1_WORLD&lt;-read_csv(&quot;https://www.hhsievertsen.net/economicdata/src/wid_world_t1.csv&quot;)
# 7. Load the data with income shares for the bottom 50pct in the World 
wid_data_b50_WORLD&lt;-read_csv(&quot;https://www.hhsievertsen.net/economicdata/src/wid_world_b50.csv&quot;)
# 8. Merge the two datasets and save as a new dataset called  wid_data_merged_World
wid_data_merged_WORLD&lt;-merge(x=wid_data_t1_WORLD,y=wid_data_b50_WORLD,by=&quot;Year&quot;,suffix=c(&#39;_t1&#39;,&#39;_b50&#39;))
# 1. Add a variable capturing the region to dataset wid_data_merged_UK
wid_data_merged_UK&lt;-mutate(wid_data_merged_UK,region=&quot;UK&quot;)
# 2. Add a variable capturing the region  to dataset wid_data_merged_WORLD
wid_data_merged_WORLD&lt;-mutate(wid_data_merged_WORLD,region=&quot;WORLD&quot;)
# combine
wid_data_full&lt;-rbind(wid_data_merged_UK,wid_data_merged_WORLD)</code></pre>
</div>
<div class="tutorial-exercise" data-label="advchart2" data-caption="Code" data-completion="1" data-diagnostics="1" data-startover="1" data-lines="0">
<pre class="text"><code>ggplot(data=wid_data_full,aes(x=Year,y=Income_share_t1))+geom_line()</code></pre>
<script type="application/json" data-opts-chunk="1">{"fig.width":6.5,"fig.height":4,"fig.retina":2,"fig.align":"default","fig.keep":"high","fig.show":"asis","out.width":624,"warning":false,"error":false,"message":false,"exercise.df_print":"paged","exercise.setup":"prepare-prep5","exercise.checker":"NULL"}</script>
</div>
<div class="tutorial-exercise-support" data-label="advchart2-hint-1" data-caption="Code" data-completion="1" data-diagnostics="1" data-startover="1" data-lines="0">
<pre class="text"><code>ggplot(data=wid_data_full,aes(x=Year,y=Income_share_t1,colour=region))+geom_line()</code></pre>
</div>
<p>Did it work? Note that R creates a legend automatically. Very good. You could now polish the line chart using tools from lecture 2. ### Plotting several variables in one chart</p>
<p>Let’s say we would like to plot both the bottom 50pct and top 1pct income share in one plot. How could we do it? Let’s first look at the plotting command from above:</p>
<ul>
<li><code>ggplot(data=wid_data_full,aes(x=Year,y=Income_share_t1))+geom_line()</code></li>
</ul>
<p>What happens in that line?</p>
<ul>
<li><code>ggplot(data=wid_data_full,aes(x=Year,y=Income_share_t1))</code> loads the data and specifies the aesthetics mapping.</li>
<li><code>geom_line()</code> simply a line chart using the instructions to <code>ggplot(...)</code> above.</li>
</ul>
<p>In other worlds, <code>geom_line()</code> inherits the dataset and aesthetics instructions from ggplot. If wanted to add more lines in one chart, we could add several <code>geom_line()</code> commands and specify the aesthetics (and dataset) separately in each. The following code will actually produce the same chart:</p>
<ul>
<li><code>ggplot(data=wid_data_full)+geom_line(aes(x=Year,y=Income_share_t1))</code></li>
</ul>
<p>so we could therefore write:</p>
<ul>
<li><code>ggplot(data=wid_data_full)+geom_line(aes(x=Year,y=Income_share_t1,colour=region))+</code> <code>geom_line(aes(x=Year,y=Income_share_b50,colour=region))</code></li>
</ul>
to plot both the “Income_share_t1” and the “Income_share_b50” variables. Try this approach below:
<div class="tutorial-exercise-support" data-label="prep6" data-caption="Code" data-completion="1" data-diagnostics="1" data-startover="1" data-lines="0">
<pre class="text"><code># 1. Load the data with income shares for the top 1pct in the UK
wid_data_t1_UK&lt;-read_csv(&quot;https://www.hhsievertsen.net/economicdata/src/wid_uk_t1.csv&quot;)
# 2. Load the data with income shares for the bottom 50pct in the UK 
wid_data_b50_UK&lt;-read_csv(&quot;https://www.hhsievertsen.net/economicdata/src/wid_uk_b50.csv&quot;)
# 3. Merge the two datasets and save as a new dataset called  wid_data_merged_UK
wid_data_merged_UK&lt;-merge(x=wid_data_t1_UK,y=wid_data_b50_UK,by=&quot;Year&quot;,suffix=c(&#39;_t1&#39;,&#39;_b50&#39;))
# 6. Load the data with income shares for the top 1pct in the World
wid_data_t1_WORLD&lt;-read_csv(&quot;https://www.hhsievertsen.net/economicdata/src/wid_world_t1.csv&quot;)
# 7. Load the data with income shares for the bottom 50pct in the World 
wid_data_b50_WORLD&lt;-read_csv(&quot;https://www.hhsievertsen.net/economicdata/src/wid_world_b50.csv&quot;)
# 8. Merge the two datasets and save as a new dataset called  wid_data_merged_World
wid_data_merged_WORLD&lt;-merge(x=wid_data_t1_WORLD,y=wid_data_b50_WORLD,by=&quot;Year&quot;,suffix=c(&#39;_t1&#39;,&#39;_b50&#39;))
# 1. Add a variable capturing the region to dataset wid_data_merged_UK
wid_data_merged_UK&lt;-mutate(wid_data_merged_UK,region=&quot;UK&quot;)
# 2. Add a variable capturing the region  to dataset wid_data_merged_WORLD
wid_data_merged_WORLD&lt;-mutate(wid_data_merged_WORLD,region=&quot;WORLD&quot;)
# combine
wid_data_full&lt;-rbind(wid_data_merged_UK,wid_data_merged_WORLD)</code></pre>
</div>
<div class="tutorial-exercise" data-label="advchart3" data-caption="Code" data-completion="1" data-diagnostics="1" data-startover="1" data-lines="0">
<pre class="text"><code>ggplot(data=wid_data_full)+geom_line(aes(x=Year,y=Income_share_t1,colour=region))</code></pre>
<script type="application/json" data-opts-chunk="1">{"fig.width":6.5,"fig.height":4,"fig.retina":2,"fig.align":"default","fig.keep":"high","fig.show":"asis","out.width":624,"warning":false,"error":false,"message":false,"exercise.df_print":"paged","exercise.setup":"prep6","exercise.checker":"NULL"}</script>
</div>
<div class="tutorial-exercise-support" data-label="advchart3-hint-1" data-caption="Code" data-completion="1" data-diagnostics="1" data-startover="1" data-lines="0">
<pre class="text"><code>ggplot(data=wid_data_full)+geom_line(aes(x=Year,y=Income_share_t1,colour=region))+
                          geom_line(aes(x=Year,y=Income_share_b50,colour=region))</code></pre>
</div>
<p>Cool! Now we have two variables for two countries. But R didn’t add a legend for the variable type. That is because R doesn’t really now how to do it. Also, we cannot actually separate the two variables because they have the same colour and pattern. We could adjust the code above manually to achieve that. However, a better approach is to use the ggplot() grammar to achive this. We will do that in the next section.</p>
<p>In this section we’ve seen a small glimpse of how we can create more advanced charts with ggplot. However, to really use the full power of ggplot(), we need to make sure that the data structure is “Tidy”. In the next section we look at how we can restructure the data.</p>
</div>
</div>
<div id="section-restructuring-the-data" class="section level2">
<h2>7 Restructuring the data</h2>
<p><em>In this lecture we will learn how to restructure the dataset.</em></p>
<div id="section-making-data-tidy" class="section level3">
<h3>Making data tidy</h3>
<p>R automatically specifies the colour and the legend when we added the “color=region” to the aesthetics. So if we could restructure the dataset in such a way, that we could write “color=income_group” we might be able achieve a nice chart in fewer lines (and in a more flexible). ggplot expects the data to be “tidy”. That means, in other words, the data structure should satisfy the tidy data principles:</p>
<ul>
<li>Each variable forms a column.</li>
<li>Each observation forms a row.</li>
<li>Each type of observational unit forms a table.</li>
</ul>
<p>Note that this is the same structure that Microsoft Excel expects for a Pivot Table. Let’s first look at the data again.</p>
<div class="tutorial-exercise" data-label="advchart4b" data-caption="Code" data-completion="1" data-diagnostics="1" data-startover="1" data-lines="0">
<pre class="text"><code>wid_data_full&lt;-rbind(wid_data_merged_UK,wid_data_merged_WORLD)
# print the first six values
head(wid_data_full)</code></pre>
<script type="application/json" data-opts-chunk="1">{"fig.width":6.5,"fig.height":4,"fig.retina":2,"fig.align":"default","fig.keep":"high","fig.show":"asis","out.width":624,"warning":false,"error":false,"message":false,"exercise.df_print":"paged","exercise.setup":"prepare-prep7b","exercise.checker":"NULL"}</script>
</div>
<p>In our dataset, we have a column called “Income_share_t1” and a dataset called “Income_share_b50”. But what we want is a column that specifies the income group and a column that shows the income share. As shown below:</p>
<p><img src="http://hhsievertsen.net/economicdata/src/fig3.png" width="100%" /></p>
<p>We can restructure our dataset using the <code>gather()</code> function, where we “gather” several columns and combine them into one new column. In this case the columns “Income_share_b50” and “Income_share_t1” in one new column. To achieve this, we use the <code>gather()</code> function. This function is a bit complex and it takes some time to get used to it. Above is an illustration of what we have and what we need and how the <code>gather()</code> function works, and here is a desription of the key arguments:</p>
<ul>
<li><p>We provide a new name for the <code>key</code> variable. This the new variable contains information about what group the observation belongs to.</p></li>
<li><p>We provide a new nae for the <code>value</code> variable. This new variable contains the value for the observation from the group given by the key variable.</p></li>
<li><p>We specify which column to combine into one column. In this example it is the second and third column, so we write <code>2:3</code>. We could name the variables. Let’s now try it:</p></li>
</ul>
<div class="tutorial-exercise" data-label="advchart4" data-caption="Code" data-completion="1" data-diagnostics="1" data-startover="1" data-lines="0">
<pre class="text"><code>wid_data_full&lt;-rbind(wid_data_merged_UK,wid_data_merged_WORLD)
# restructure the dataset 
wid_data_restructured&lt;-gather(wid_data_full,key=income_group, value=income_share, 2:3)
# print the first six values
head(wid_data_restructured)</code></pre>
<script type="application/json" data-opts-chunk="1">{"fig.width":6.5,"fig.height":4,"fig.retina":2,"fig.align":"default","fig.keep":"high","fig.show":"asis","out.width":624,"warning":false,"error":false,"message":false,"exercise.df_print":"paged","exercise.setup":"prepare-prep7a","exercise.checker":"NULL"}</script>
</div>
<p>Looks good! The new dataset is considerably longer than the old one and slightly narrower. This data structure is therefore called “long” and the one we had before is called “wide”.</p>
</div>
<div id="section-a-chart-with-two-legends-two-variables-and-two-regions" class="section level3">
<h3>A chart with two legends, two variables and two regions</h3>
<p>We are now ready to create a new chart and exploit that we have the correct tidy data structure. Let’s ask R to let the colour of the line identify the region and the line type identify the income group. Let’s run the code below</p>
<div class="tutorial-exercise-support" data-label="prepare-prep8" data-caption="Code" data-completion="1" data-diagnostics="1" data-startover="1" data-lines="0">
<pre class="text"><code># 1. Load the data with income shares for the top 1pct in the UK
wid_data_t1_UK&lt;-read_csv(&quot;https://www.hhsievertsen.net/economicdata/src/wid_uk_t1.csv&quot;)
# 2. Load the data with income shares for the bottom 50pct in the UK 
wid_data_b50_UK&lt;-read_csv(&quot;https://www.hhsievertsen.net/economicdata/src/wid_uk_b50.csv&quot;)
# 3. Merge the two datasets and save as a new dataset called  wid_data_merged_UK
wid_data_merged_UK&lt;-merge(x=wid_data_t1_UK,y=wid_data_b50_UK,by=&quot;Year&quot;,suffix=c(&#39;_t1&#39;,&#39;_b50&#39;))
# 6. Load the data with income shares for the top 1pct in the World
wid_data_t1_WORLD&lt;-read_csv(&quot;https://www.hhsievertsen.net/economicdata/src/wid_world_t1.csv&quot;)
# 7. Load the data with income shares for the bottom 50pct in the World 
wid_data_b50_WORLD&lt;-read_csv(&quot;https://www.hhsievertsen.net/economicdata/src/wid_world_b50.csv&quot;)
# 8. Merge the two datasets and save as a new dataset called  wid_data_merged_World
wid_data_merged_WORLD&lt;-merge(x=wid_data_t1_WORLD,y=wid_data_b50_WORLD,by=&quot;Year&quot;,suffix=c(&#39;_t1&#39;,&#39;_b50&#39;))
# 1. Add a variable capturing the region to dataset wid_data_merged_UK
wid_data_merged_UK&lt;-mutate(wid_data_merged_UK,region=&quot;UK&quot;)
# 2. Add a variable capturing the region  to dataset wid_data_merged_WORLD
wid_data_merged_WORLD&lt;-mutate(wid_data_merged_WORLD,region=&quot;WORLD&quot;)
# combine
wid_data_full&lt;-rbind(wid_data_merged_UK,wid_data_merged_WORLD)
wid_data_restructured&lt;-gather(wid_data_full,key=income_group, value=income_share, 2:3)</code></pre>
</div>
<div class="tutorial-exercise" data-label="advchart5" data-caption="Code" data-completion="1" data-diagnostics="1" data-startover="1" data-lines="0">
<pre class="text"><code># Create a chart with income shares for 2 groups and 2 regions
ggplot(data=wid_data_restructured,aes(x=Year,y=income_share,colour=region,linetype=income_group))+
  geom_line()</code></pre>
<script type="application/json" data-opts-chunk="1">{"fig.width":6.5,"fig.height":4,"fig.retina":2,"fig.align":"default","fig.keep":"high","fig.show":"asis","out.width":624,"warning":false,"error":false,"message":false,"exercise.df_print":"paged","exercise.setup":"prepare-prep8","exercise.checker":"NULL"}</script>
</div>
<p>Cool! You can now polish the chart using the tools from lecture 2. Hint: You can change the title of the colour legend by adding “colour=‘My new title’” to the <code>+labs(..)</code> layer.</p>
<p>Before we continue to the last topic of this lecture, let’s change the chart slightly. What if we wanted a connected line chart. A connected line chart is a set of connected markers or points. In other words, it is just as above, but also coints small points at each data point. We can achieve that by simply adding <code>+geom_line()</code> to the code above. Try it below:</p>
<div class="tutorial-exercise" data-label="advchart6" data-caption="Code" data-completion="1" data-diagnostics="1" data-startover="1" data-lines="0">
<pre class="text"><code># Create a connected line  chart with income shares for 2 groups and 2 regions
ggplot(data=wid_data_restructured,aes(x=Year,y=income_share,colour=region,linetype=income_group))+
  geom_line()</code></pre>
<script type="application/json" data-opts-chunk="1">{"fig.width":6.5,"fig.height":4,"fig.retina":2,"fig.align":"default","fig.keep":"high","fig.show":"asis","out.width":624,"warning":false,"error":false,"message":false,"exercise.df_print":"paged","exercise.setup":"prepare-prep8","exercise.checker":"NULL"}</script>
</div>
<div class="tutorial-exercise-support" data-label="advchart6-hint-1" data-caption="Code" data-completion="1" data-diagnostics="1" data-startover="1" data-lines="0">
<pre class="text"><code># Create a connected line chart with income shares for 2 groups and 2 regions
ggplot(data=wid_data_restructured,aes(x=Year,y=income_share,colour=region,linetype=income_group))+
  geom_line()+geom_point()</code></pre>
</div>
</div>
<div id="section-spreading-the-data" class="section level3">
<h3>Spreading the data</h3>
<p>We’ve learnt how to convert the data from wide to long. How can we achieve the opposite? Turn a dataset from long to wide? Let’s se whether we can rewind <tt>wid_data_restructured</tt> dataset. When we restructured the dataset from wide to long, we “gathered” several variables in one column. Now we want to “spread” one variable into several variables. Guess what, we are going to use the <code>spread()</code> function:</p>
<ul>
<li><code>spread(key=..,value=... )</code></li>
</ul>
<p>Just like above, our <code>key</code> tells us the group and the <code>value</code> variable, the value. So to turn <code>wid_data_restructured</code> back to <code>wid_data_full</code> we would write:</p>
<ul>
<li><code>spread(key=income_group, value=income_share)</code></li>
</ul>
<p>now it’s your turn:</p>
<div class="tutorial-exercise-support" data-label="prep9" data-caption="Code" data-completion="1" data-diagnostics="1" data-startover="1" data-lines="0">
<pre class="text"><code># 1. Load the data with income shares for the top 1pct in the UK
wid_data_t1_UK&lt;-read_csv(&quot;https://www.hhsievertsen.net/economicdata/src/wid_uk_t1.csv&quot;)
# 2. Load the data with income shares for the bottom 50pct in the UK 
wid_data_b50_UK&lt;-read_csv(&quot;https://www.hhsievertsen.net/economicdata/src/wid_uk_b50.csv&quot;)
# 3. Merge the two datasets and save as a new dataset called  wid_data_merged_UK
wid_data_merged_UK&lt;-merge(x=wid_data_t1_UK,y=wid_data_b50_UK,by=&quot;Year&quot;,suffix=c(&#39;_t1&#39;,&#39;_b50&#39;))
# 6. Load the data with income shares for the top 1pct in the World
wid_data_t1_WORLD&lt;-read_csv(&quot;https://www.hhsievertsen.net/economicdata/src/wid_world_t1.csv&quot;)
# 7. Load the data with income shares for the bottom 50pct in the World 
wid_data_b50_WORLD&lt;-read_csv(&quot;https://www.hhsievertsen.net/economicdata/src/wid_world_b50.csv&quot;)
# 8. Merge the two datasets and save as a new dataset called  wid_data_merged_World
wid_data_merged_WORLD&lt;-merge(x=wid_data_t1_WORLD,y=wid_data_b50_WORLD,by=&quot;Year&quot;,suffix=c(&#39;_t1&#39;,&#39;_b50&#39;))
# 1. Add a variable capturing the region to dataset wid_data_merged_UK
wid_data_merged_UK&lt;-mutate(wid_data_merged_UK,region=&quot;UK&quot;)
# 2. Add a variable capturing the region  to dataset wid_data_merged_WORLD
wid_data_merged_WORLD&lt;-mutate(wid_data_merged_WORLD,region=&quot;WORLD&quot;)
# combine
wid_data_full&lt;-rbind(wid_data_merged_UK,wid_data_merged_WORLD)
wid_data_restructured&lt;-gather(wid_data_full,key=income_group, value=income_share, 2:3)</code></pre>
</div>
<div class="tutorial-exercise" data-label="advchart7" data-caption="Code" data-completion="1" data-diagnostics="1" data-startover="1" data-lines="0">
<pre class="text"><code># 1. Display the structure of the original variable:
head(wid_data_restructured)
# 2. Spread the income_group and income_share variables out on several variables:

# 3. Display the new structure
head(wid_data_returned)</code></pre>
<script type="application/json" data-opts-chunk="1">{"fig.width":6.5,"fig.height":4,"fig.retina":2,"fig.align":"default","fig.keep":"high","fig.show":"asis","out.width":624,"warning":false,"error":false,"message":false,"exercise.df_print":"paged","exercise.setup":"prep9","exercise.checker":"NULL"}</script>
</div>
<div class="tutorial-exercise-support" data-label="advchart7-hint-1" data-caption="Code" data-completion="1" data-diagnostics="1" data-startover="1" data-lines="0">
<pre class="text"><code># 1. Display the structure of the original variable:
head(wid_data_restructured)
# 2. Spread the income_group and income_share variables out on several variables:
wid_data_returned&lt;-spread(wid_data_restructured,key=income_group, value=income_share)
# 3. Display the new structure
head(wid_data_returned)</code></pre>
</div>
<p>Well done! We can now convert wide datasets to long datasets and long datasets to wide datasets and we can create plots with several groups and variables.</p>
</div>
<div id="section-slightly-advanced-charts---summary" class="section level3">
<h3>Slightly advanced charts - summary</h3>
<p>In this lecture we covered the following topics and functions</p>
<ul>
<li>In <code>ggplot(xyz)+geom_line()</code> the <code>geom_line()</code> layer inherits the <code>xyz</code> from the <code>ggplot(xyz)</code>.</li>
<li>In <code>ggplot()+geom_line(xyz)</code> the <code>geom_line()</code> receives its own <code>xyz</code> instructions.</li>
<li>In <code>aes(x=Year,y=income_share,colour=region)</code> we ask R to separate the the values by colour according to the variable region.</li>
<li>In <code>aes(x=Year,y=income_share,linetype=region)</code> we ask R to separate the the values by line type according to the variable .</li>
<li><code>gather()</code> can be used to gather several variables (columns) in one (two) variables.</li>
<li><code>spread()</code> can be used to spread one variable across several columns.</li>
</ul>
</div>
</div>
<div id="section-moving-to-r-and-rstudio" class="section level2">
<h2>8 Moving to R and RStudio</h2>
<div id="section-installing-r-and-r-studio" class="section level3">
<h3>Installing R and R Studio</h3>
<p>There is a limit on what you can do within this tutorial. To really use R, you should install it. Here is a guide to to</p>
<p>If we just install R we will get a basic program. The R console shows us the commands we have entered the resulting output. Charts will appear in new winds.</p>
<p>Howvever, most R users also use an program such as RStudio. RStudio is in an integrated development environment (IDE) for R. An IDE is an interface that makes programming more user-friendly. This is actually much more convenient than this tutorial. In RSttudio we also get an overview of the workspace, that is, we can see the variables and data that we are working with and we can also directly see graphs, help files, and navigate through directories. RStudio is by far the most popular IDE for R, and we will use RStudio throughout this unit.</p>
<p>So to get started :</p>
<ol style="list-style-type: decimal">
<li>Install R from the website: <a href="https://www.r-project.org/">www.r-project.org</a></li>
<li>Install RStudio from the website: <a href="https://rstudio.com/">www.rstudio.com</a></li>
</ol>
<p>That is it!</p>
<div class="figure" style="text-align: center">
<iframe src="https://www.youtube.com/embed/6KifA4YN768" width="70%" height="400px">
</iframe>
<p class="caption">
Installing R and R Studio
</p>
</div>
</div>
<div id="section-using-rstudio-cloud" class="section level3">
<h3>Using RStudio cloud</h3>
<p>If you do not want to install R on your computer you can use a cloud solution. This means that you run R in a web browser. You can sign up for R Studio Cloud here: <a href="http://rstudio.cloud/">www.rstudio.cloud</a></p>
<p>There are also lots of great R learning resource available on RStudio Cloud.</p>
</div>
<div id="section-installing-and-loading-packages" class="section level3">
<h3>Installing and loading packages</h3>
<p>I skipped a few boring steps in this tutorial. One boring step is the step of loading and installing packages. Everyone can write a package to improve R. We can typically install these pacakages directly in R. The only package we used in this tutorial is the <code>tidyverse</code> package (which is actually a collection of many packages). To install the tidyverse package we write:</p>
<p><code>install.packages("tidyverse")</code></p>
<p>we only need to do this once. However, we have to load the tidyverse package in every R session where we want to use it. We do that with the following line:</p>
<p><code>library(tidyverse)</code></p>
<p>The same holds for other packages.</p>
</div>
<div id="section-loading-data-and-working-directory" class="section level3">
<h3>Loading data and working directory</h3>
<p>So far we’ve loaded all datasets from website. But often you will have downloaded the dataset to your computer. To load a local locate the file on your computer and identify the directory For example for the files below the directory path would be <code>C:\Users\hs17922\Dropbox\Work\Teaching\Economic Data\2019_2020\rtutorial\RIntro\data</code></p>
<p><img src="http://hhsievertsen.net/economicdata/src/fig5.png" width="60%" /></p>
<p>to load a the file <code>wid_uk_t1.csv</code> from that directory we would write:</p>
<p><code>read_csv(C:\\Users\\hs17922\\Dropbox\\Work\\Teaching\\Economic Data\\2019_2020\\rtutorial\\RIntro\\data\\wid_uk_t1.csv)</code></p>
<p>Note that we have to use <code>\\</code> instead of just a single <code>\</code>. We can also tell R to work from a specific directory on your computer using the <code>setwd()</code> command. For example:</p>
<p><code>read_csv(C:\\Users\\hs17922\\Dropbox\\)</code></p>
<p>After we’ve specified the working directory R will always look for files in that directory and save files to that directory.</p>
</div>
<div id="section-warnings" class="section level3">
<h3>Warnings</h3>
<p>In the tutorial i disabled warnings and messages. These warnings and message are actually provide a lot of helpful information. Try the code below (where I didn’t disable the warnings).</p>
<div class="tutorial-exercise" data-label="warnings" data-caption="Code" data-completion="1" data-diagnostics="1" data-startover="1" data-lines="0">
<pre class="text"><code>wid_data&lt;-read_csv(&quot;https://www.hhsievertsen.net/economicdata/src/wid_uk_t1.csv&quot;)</code></pre>
<script type="application/json" data-opts-chunk="1">{"fig.width":6.5,"fig.height":4,"fig.retina":2,"fig.align":"default","fig.keep":"high","fig.show":"asis","out.width":624,"warning":true,"error":false,"message":true,"exercise.df_print":"paged","exercise.checker":"NULL"}</script>
</div>
<p>The message tells us how R loaded the dataset and what type each variable in the dataset is.</p>
</div>
<div id="section-getting-help" class="section level3">
<h3>Getting help</h3>
<p>We are approaching the end of this tutorial. While we’ve covered many topics, we only covered a tiny little part corner of the R universe. One of the most important skills for using R is to be able to search for help. So how can you do that?</p>
<ul>
<li>You can use the help function. We already covered how you can look for the documentation of functions in R.</li>
<li>You can use books. The R for Data Science is probably my favorite book on this topic. You can read it for free here:[<a href="https://r4ds.had.co.nz/" class="uri">https://r4ds.had.co.nz/</a>] (<a href="https://r4ds.had.co.nz/" class="uri">https://r4ds.had.co.nz/</a>).</li>
<li>You can ask the Internet. Say that we would like to split one column in two. We have no clue how to do it. What to do? We could ask the Internet using a search engine:</li>
</ul>
<p><img src="http://hhsievertsen.net/economicdata/src/fig4.png" width="60%" /> * You will get many useful answers to most R questions on the internet.</p>
<p><strong>Disclaimer and credits</strong></p>
<ul>
<li><p>I use data from the World Inequality Database for this tutorial. Thanks for providing great data. I hope that it is okay to use it for this purpose.</p></li>
<li><p>I use slightly imprecise language in the tutorial. I am not very accurate on very a objects, variables, lists, etc. Being able to distinguish these concepts are important for advanced R, but for beginners R, I believe they can be quite confusing. 
<script type="application/shiny-prerendered" data-context="server-start">
library(learnr)
library(tidyverse)
library(shinythemes)
library(aewr)
knitr::opts_chunk$set(echo = FALSE,cache=TRUE)
</script>
 
<script type="application/shiny-prerendered" data-context="server">
learnr:::register_http_handlers(session, metadata = NULL)
</script>
 
<script type="application/shiny-prerendered" data-context="server">
session$onSessionEnded(function() {
        learnr:::session_stop_event(session)
      })
</script>
 
<script type="application/shiny-prerendered" data-context="server">
`tutorial-exercise-first-chart1-result` <- learnr:::setup_exercise_handler(reactive(req(input$`tutorial-exercise-first-chart1-code-editor`)), session)
output$`tutorial-exercise-first-chart1-output` <- renderUI({
  `tutorial-exercise-first-chart1-result`()
})
</script>
 
<script type="application/shiny-prerendered" data-context="server">
`tutorial-exercise-first-chart3-result` <- learnr:::setup_exercise_handler(reactive(req(input$`tutorial-exercise-first-chart3-code-editor`)), session)
output$`tutorial-exercise-first-chart3-output` <- renderUI({
  `tutorial-exercise-first-chart3-result`()
})
</script>
 <!--html_preserve--></p>
<script type="application/shiny-prerendered" data-context="dependencies">
{"type":"list","attributes":{},"value":[{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["header-attrs"]},{"type":"character","attributes":{},"value":["2.3"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["rmd/h/pandoc"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["header-attrs.js"]},{"type":"NULL"},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["rmarkdown"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["2.3"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["jquery"]},{"type":"character","attributes":{},"value":["1.11.3"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["rmd/h/jquery"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["jquery.min.js"]},{"type":"NULL"},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["rmarkdown"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["2.3"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["bootstrap"]},{"type":"character","attributes":{},"value":["3.3.5"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["rmd/h/bootstrap"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["viewport"]}},"value":[{"type":"character","attributes":{},"value":["width=device-width, initial-scale=1"]}]},{"type":"character","attributes":{},"value":["js/bootstrap.min.js","shim/html5shiv.min.js","shim/respond.min.js"]},{"type":"character","attributes":{},"value":["css/cerulean.min.css"]},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["rmarkdown"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["2.3"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["pagedtable"]},{"type":"character","attributes":{},"value":["1.1"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["rmd/h/pagedtable-1.1"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["js/pagedtable.js"]},{"type":"character","attributes":{},"value":["css/pagedtable.css"]},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["rmarkdown"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["2.3"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["highlightjs"]},{"type":"character","attributes":{},"value":["9.12.0"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["rmd/h/highlightjs"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["highlight.js"]},{"type":"character","attributes":{},"value":["textmate.css"]},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["rmarkdown"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["2.3"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["tutorial"]},{"type":"character","attributes":{},"value":["0.10.1"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["lib/tutorial"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["tutorial.js"]},{"type":"character","attributes":{},"value":["tutorial.css"]},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["learnr"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["0.10.1"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["tutorial-autocompletion"]},{"type":"character","attributes":{},"value":["0.10.1"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["lib/tutorial"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["tutorial-autocompletion.js"]},{"type":"NULL"},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["learnr"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["0.10.1"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["tutorial-diagnostics"]},{"type":"character","attributes":{},"value":["0.10.1"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["lib/tutorial"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["tutorial-diagnostics.js"]},{"type":"NULL"},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["learnr"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["0.10.1"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["tutorial-format"]},{"type":"character","attributes":{},"value":["0.10.1"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["rmarkdown/templates/tutorial/resources"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["tutorial-format.js"]},{"type":"character","attributes":{},"value":["tutorial-format.css","rstudio-theme.css"]},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["learnr"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["0.10.1"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["jquery"]},{"type":"character","attributes":{},"value":["1.11.3"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["rmd/h/jquery"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["jquery.min.js"]},{"type":"NULL"},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["rmarkdown"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["2.3"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["navigation"]},{"type":"character","attributes":{},"value":["1.1"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["rmd/h/navigation-1.1"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["tabsets.js"]},{"type":"NULL"},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["rmarkdown"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["2.3"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["highlightjs"]},{"type":"character","attributes":{},"value":["9.12.0"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["rmd/h/highlightjs"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["highlight.js"]},{"type":"character","attributes":{},"value":["default.css"]},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["rmarkdown"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["2.3"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["jquery"]},{"type":"character","attributes":{},"value":["1.11.3"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["rmd/h/jquery"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["jquery.min.js"]},{"type":"NULL"},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["rmarkdown"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["2.3"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["font-awesome"]},{"type":"character","attributes":{},"value":["5.1.0"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["rmd/h/fontawesome"]}]},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["css/all.css","css/v4-shims.css"]},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["rmarkdown"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["2.3"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["bootbox"]},{"type":"character","attributes":{},"value":["4.4.0"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["lib/bootbox"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["bootbox.min.js"]},{"type":"NULL"},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["learnr"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["0.10.1"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["idb-keyvalue"]},{"type":"character","attributes":{},"value":["3.2.0"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["lib/idb-keyval"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["idb-keyval-iife-compat.min.js"]},{"type":"NULL"},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["learnr"]},{"type":"logical","attributes":{},"value":[false]},{"type":"character","attributes":{},"value":["0.10.1"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["tutorial"]},{"type":"character","attributes":{},"value":["0.10.1"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["lib/tutorial"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["tutorial.js"]},{"type":"character","attributes":{},"value":["tutorial.css"]},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["learnr"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["0.10.1"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["tutorial-autocompletion"]},{"type":"character","attributes":{},"value":["0.10.1"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["lib/tutorial"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["tutorial-autocompletion.js"]},{"type":"NULL"},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["learnr"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["0.10.1"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["tutorial-diagnostics"]},{"type":"character","attributes":{},"value":["0.10.1"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["lib/tutorial"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["tutorial-diagnostics.js"]},{"type":"NULL"},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["learnr"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["0.10.1"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["ace"]},{"type":"character","attributes":{},"value":["1.2.6"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["lib/ace"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["ace.js"]},{"type":"NULL"},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["learnr"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["0.10.1"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["clipboardjs"]},{"type":"character","attributes":{},"value":["1.5.15"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["lib/clipboardjs"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["clipboard.min.js"]},{"type":"NULL"},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["learnr"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["0.10.1"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["ace"]},{"type":"character","attributes":{},"value":["1.2.6"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["lib/ace"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["ace.js"]},{"type":"NULL"},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["learnr"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["0.10.1"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["clipboardjs"]},{"type":"character","attributes":{},"value":["1.5.15"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["lib/clipboardjs"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["clipboard.min.js"]},{"type":"NULL"},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["learnr"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["0.10.1"]}]}]}
</script>
<!--/html_preserve-->
<!--html_preserve-->
<script type="application/shiny-prerendered" data-context="execution_dependencies">
{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["packages"]}},"value":[{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["packages","version"]},"class":{"type":"character","attributes":{},"value":["data.frame"]},"row.names":{"type":"integer","attributes":{},"value":[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81]}},"value":[{"type":"character","attributes":{},"value":["aewr","assertthat","backports","base","blob","broom","cellranger","cli","colorspace","compiler","crayon","datasets","DBI","dbplyr","digest","dplyr","ellipsis","evaluate","fansi","fastmap","forcats","fs","generics","ggplot2","glue","graphics","grDevices","grid","gtable","haven","hms","htmltools","htmlwidgets","httpuv","httr","jsonlite","knitr","later","lattice","learnr","lifecycle","lubridate","magrittr","markdown","methods","mime","modelr","munsell","nlme","pillar","pkgconfig","promises","purrr","R6","Rcpp","readr","readxl","reprex","rlang","rmarkdown","rprojroot","rstudioapi","rvest","scales","shiny","shinythemes","stats","stringi","stringr","tibble","tidyr","tidyselect","tidyverse","tools","utils","vctrs","withr","xfun","xml2","xtable","yaml"]},{"type":"character","attributes":{},"value":["0.1.0","0.2.1","1.1.7","4.0.0","1.2.1","0.5.6","1.1.0","2.0.2","1.4-1","4.0.0","1.3.4","4.0.0","1.1.0","1.4.4","0.6.25","1.0.0","0.3.1","0.14","0.4.1","1.0.1","0.5.0","1.4.1","0.0.2","3.3.2","1.4.1","4.0.0","4.0.0","4.0.0","0.3.0","2.3.1","0.5.3","0.5.0","1.5.1","1.5.4","1.4.1","1.7.0","1.29","1.1.0.1","0.20-41","0.10.1","0.2.0","1.7.9","1.5","1.1","4.0.0","0.9","0.1.8","0.5.0","3.1-147","1.4.4","2.0.3","1.1.1","0.3.4","2.4.1","1.0.4.6","1.3.1","1.3.1","0.3.0","0.4.6","2.3","1.3-2","0.11","0.3.5","1.1.1","1.5.0","1.1.2","4.0.0","1.4.6","1.4.0","3.0.1","1.1.0","1.1.0","1.3.0","4.0.0","4.0.0","0.3.1","2.2.0","0.15","1.3.2","1.8-4","2.2.1"]}]}]}
</script>
<!--/html_preserve--></li>
</ul>
</div>
</div>

</div> <!-- topics -->

<div class="topicsContainer">
<div class="topicsPositioner">
<div class="band">
<div class="bandContent topicsListContainer">

<!-- begin doc-metadata -->
<div id="doc-metadata">
<h2 class="title toc-ignore" style="display:none;">R introduction</h2>
</div>
<!-- end doc-metadata -->

</div> <!-- bandContent.topicsListContainer -->
</div> <!-- band -->
</div> <!-- topicsPositioner -->
</div> <!-- topicsContainer -->


</div> <!-- bandContent page -->
</div> <!-- pageContent band -->




<script>
// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.header').parent('thead').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});
</script>


<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>


</body>

</html>
